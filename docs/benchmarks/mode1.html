<!DOCTYPE html><head><meta charset="UTF-8"><link rel="icon" type="image/x-icon" href="../media/raccoon_icon.png" sizes="16x16 32x32 64x64 128x128"></link><link href="../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../contrib/katex/katex.min.css" type="text/css" rel="stylesheet"></link><link href="../css/katex_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../contrib/katex/katex.min.js"></script><script type="text/javascript" src="../contrib/plotly/plotly.min.js"></script><title>Mode I Crack Propagation|RACCOON</title></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="https://hugary1995.github.io/raccoon/index.html" class="left moose-logo hide-on-med-and-down">RACCOON</a><a href="https://github.com/hugary1995/raccoon" class="right"><img src="../media/framework/github-logo.png" class="github-mark"></img><img src="../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"><li><a href="../install/index.html">Install</a></li><li class="moose-mega-menu-trigger" data-target="902ae442-8815-4ff0-8a77-86b9e5941f84"><a>Benchmarks<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../theory/index.html">Theory</a></li><li><a href="../modules/index.html">Modules</a></li><li><a href="../syntax/index.html">Syntax</a></li></ul><a href="#" class="sidenav-trigger" data-target="f75915fb-77bc-492f-bcf4-f97eaf896655"><i class="material-icons">menu</i></a><ul class="sidenav" id="f75915fb-77bc-492f-bcf4-f97eaf896655"><li><a href="../install/index.html">Install</a></li><li><a href="../benchmarks.menu.html">Benchmarks</a></li><li><a href="../theory/index.html">Theory</a></li><li><a href="../modules/index.html">Modules</a></li><li><a href="../syntax/index.html">Syntax</a></li></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div></nav><div class="moose-mega-menu-content" id="902ae442-8815-4ff0-8a77-86b9e5941f84"><div class="moose-mega-menu-wrapper"><div class="row row"><div class="col s12 m6 l4"><h2 id="mode-i-crack-propagation"><a href="#">Mode I crack propagation <i class="material-icons moose-inline-icon">link</i></a></h2><img src="../media/mode1.gif" class="materialboxed moose-image" style="width:75%;float:left;padding-top:2.5%;"></img><p></p></div><div class="col s12 m6 l4"><h2 id="mode-ii-crack-propagation"><a href="mode2.html">Mode II crack propagation <i class="material-icons moose-inline-icon">link</i></a></h2><img src="../media/mode2.gif" class="materialboxed moose-image" style="width:75%;float:left;padding-top:2.5%;"></img><p></p></div><div class="col s12 m6 l4"><h2 id="soil-desiccation"><a href="mud.html">Soil desiccation <i class="material-icons moose-inline-icon">link</i></a></h2><img src="../media/soil.gif" class="materialboxed moose-image" style="width:75%;float:left;padding-top:2.5%;"></img><p></p></div></div></div></div><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="https://hugary1995.github.io/raccoon/index.html" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><a href="." class="breadcrumb">benchmarks</a><a href="#" class="breadcrumb">mode1</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section id="022dd3d1-f208-4d7e-96f8-49b15c8f2228" data-section-level="1" data-section-text="Mode I Crack Propagation"><h1 id="mode-i-crack-propagation">Mode I Crack Propagation</h1><div class="card moose-float" style="width:30%;margin:auto;padding-top:2.5%;" id="mode1_bcs"><div class="card-content"><img src="../media/mode1_bcs.png" class="materialboxed moose-image"></img><p class="moose-caption"><span class="moose-caption-heading">Figure 1: </span><span class="moose-caption-text">boundary conditions of the Mode-I problem</span></p></div></div><p>Consider a 1mm <span tex="\times" bookmark="moose-equation-16bf8a1c-4ef3-4e81-9d44-6be6abdf3280" recursive="True" class="moose-katex-inline-equation" id="moose-equation-16bf8a1c-4ef3-4e81-9d44-6be6abdf3280"><script>var element = document.getElementById("moose-equation-16bf8a1c-4ef3-4e81-9d44-6be6abdf3280");katex.render("\\times", element, {displayMode:false,throwOnError:false,macros:{"\\bs":"\\boldsymbol{#1}","\\normal":"\\bs{n}","\\divergence":"\\nabla \\cdot","\\norm":"\\left\\lVert#1\\right\\rVert","\\dArea":"\\text{ d}A","\\dVolume":"\\text{ d}V","\\total":"\\text{total}","\\internal":"\\text{internal}","\\external":"\\text{external}","\\elastic":"\\text{elastic}","\\fracture":"\\text{fracture}","\\critical":"\\text{critical}","\\activeenergy":"{\\left< A \\right>}","\\inactiveenergy":"{\\left< I \\right>}","\\Gc":"\\mathcal{G}_c","\\strain":"\\bs{\\varepsilon}","\\stress":"\\bs{\\sigma}","\\xstress":"\\widetilde{\\stress}","\\macaulay":"\\left<#1\\right>"}});</script></span> 1mm plate with a pre-existing crack on the left side, loaded in uniaxial tension, as shown in <a href="#mode1_bcs">Figure 1</a>. We assume the plate to be composed of an isotropic material with Young&#x27;s modulus <span tex="E = 2.1 \times 10^5" bookmark="moose-equation-7f220a34-4971-4b46-a8f7-cf508d6a6e74" recursive="True" class="moose-katex-inline-equation" id="moose-equation-7f220a34-4971-4b46-a8f7-cf508d6a6e74"><script>var element = document.getElementById("moose-equation-7f220a34-4971-4b46-a8f7-cf508d6a6e74");katex.render("E = 2.1 \\times 10^5", element, {displayMode:false,throwOnError:false,macros:{"\\bs":"\\boldsymbol{#1}","\\normal":"\\bs{n}","\\divergence":"\\nabla \\cdot","\\norm":"\\left\\lVert#1\\right\\rVert","\\dArea":"\\text{ d}A","\\dVolume":"\\text{ d}V","\\total":"\\text{total}","\\internal":"\\text{internal}","\\external":"\\text{external}","\\elastic":"\\text{elastic}","\\fracture":"\\text{fracture}","\\critical":"\\text{critical}","\\activeenergy":"{\\left< A \\right>}","\\inactiveenergy":"{\\left< I \\right>}","\\Gc":"\\mathcal{G}_c","\\strain":"\\bs{\\varepsilon}","\\stress":"\\bs{\\sigma}","\\xstress":"\\widetilde{\\stress}","\\macaulay":"\\left<#1\\right>"}});</script></span>MPa, Poisson&#x27;s ratio <span tex="\nu = 0.3" bookmark="moose-equation-d1ecc79d-dbab-46e4-886f-4d5631f3761d" recursive="True" class="moose-katex-inline-equation" id="moose-equation-d1ecc79d-dbab-46e4-886f-4d5631f3761d"><script>var element = document.getElementById("moose-equation-d1ecc79d-dbab-46e4-886f-4d5631f3761d");katex.render("\\nu = 0.3", element, {displayMode:false,throwOnError:false,macros:{"\\bs":"\\boldsymbol{#1}","\\normal":"\\bs{n}","\\divergence":"\\nabla \\cdot","\\norm":"\\left\\lVert#1\\right\\rVert","\\dArea":"\\text{ d}A","\\dVolume":"\\text{ d}V","\\total":"\\text{total}","\\internal":"\\text{internal}","\\external":"\\text{external}","\\elastic":"\\text{elastic}","\\fracture":"\\text{fracture}","\\critical":"\\text{critical}","\\activeenergy":"{\\left< A \\right>}","\\inactiveenergy":"{\\left< I \\right>}","\\Gc":"\\mathcal{G}_c","\\strain":"\\bs{\\varepsilon}","\\stress":"\\bs{\\sigma}","\\xstress":"\\widetilde{\\stress}","\\macaulay":"\\left<#1\\right>"}});</script></span>, fracture toughness <span tex="\Gc = 2.7" bookmark="moose-equation-f89dfb7b-fcb4-4e16-820c-b4fd3b9de0c8" recursive="True" class="moose-katex-inline-equation" id="moose-equation-f89dfb7b-fcb4-4e16-820c-b4fd3b9de0c8"><script>var element = document.getElementById("moose-equation-f89dfb7b-fcb4-4e16-820c-b4fd3b9de0c8");katex.render("\\Gc = 2.7", element, {displayMode:false,throwOnError:false,macros:{"\\bs":"\\boldsymbol{#1}","\\normal":"\\bs{n}","\\divergence":"\\nabla \\cdot","\\norm":"\\left\\lVert#1\\right\\rVert","\\dArea":"\\text{ d}A","\\dVolume":"\\text{ d}V","\\total":"\\text{total}","\\internal":"\\text{internal}","\\external":"\\text{external}","\\elastic":"\\text{elastic}","\\fracture":"\\text{fracture}","\\critical":"\\text{critical}","\\activeenergy":"{\\left< A \\right>}","\\inactiveenergy":"{\\left< I \\right>}","\\Gc":"\\mathcal{G}_c","\\strain":"\\bs{\\varepsilon}","\\stress":"\\bs{\\sigma}","\\xstress":"\\widetilde{\\stress}","\\macaulay":"\\left<#1\\right>"}});</script></span>Jmm<span tex="^{-3}" bookmark="moose-equation-ece2036d-3487-482d-a55e-5a47aca6d909" recursive="True" class="moose-katex-inline-equation" id="moose-equation-ece2036d-3487-482d-a55e-5a47aca6d909"><script>var element = document.getElementById("moose-equation-ece2036d-3487-482d-a55e-5a47aca6d909");katex.render("^{-3}", element, {displayMode:false,throwOnError:false,macros:{"\\bs":"\\boldsymbol{#1}","\\normal":"\\bs{n}","\\divergence":"\\nabla \\cdot","\\norm":"\\left\\lVert#1\\right\\rVert","\\dArea":"\\text{ d}A","\\dVolume":"\\text{ d}V","\\total":"\\text{total}","\\internal":"\\text{internal}","\\external":"\\text{external}","\\elastic":"\\text{elastic}","\\fracture":"\\text{fracture}","\\critical":"\\text{critical}","\\activeenergy":"{\\left< A \\right>}","\\inactiveenergy":"{\\left< I \\right>}","\\Gc":"\\mathcal{G}_c","\\strain":"\\bs{\\varepsilon}","\\stress":"\\bs{\\sigma}","\\xstress":"\\widetilde{\\stress}","\\macaulay":"\\left<#1\\right>"}});</script></span>, and critical strength <span tex="\sigma_c = 2.5 \times 10^3" bookmark="moose-equation-67e1ffda-d920-4181-8068-15b12e1d4696" recursive="True" class="moose-katex-inline-equation" id="moose-equation-67e1ffda-d920-4181-8068-15b12e1d4696"><script>var element = document.getElementById("moose-equation-67e1ffda-d920-4181-8068-15b12e1d4696");katex.render("\\sigma_c = 2.5 \\times 10^3", element, {displayMode:false,throwOnError:false,macros:{"\\bs":"\\boldsymbol{#1}","\\normal":"\\bs{n}","\\divergence":"\\nabla \\cdot","\\norm":"\\left\\lVert#1\\right\\rVert","\\dArea":"\\text{ d}A","\\dVolume":"\\text{ d}V","\\total":"\\text{total}","\\internal":"\\text{internal}","\\external":"\\text{external}","\\elastic":"\\text{elastic}","\\fracture":"\\text{fracture}","\\critical":"\\text{critical}","\\activeenergy":"{\\left< A \\right>}","\\inactiveenergy":"{\\left< I \\right>}","\\Gc":"\\mathcal{G}_c","\\strain":"\\bs{\\varepsilon}","\\stress":"\\bs{\\sigma}","\\xstress":"\\widetilde{\\stress}","\\macaulay":"\\left<#1\\right>"}});</script></span>MPa. The plate is fixed along the bottom, and the top surface is displaced in the vertical direction.  Roller supports are also assumed to be in place, such that the horizontal displacement vanishes along the top surface. The plate is assumed to be sufficiently thick such that plane strain conditions hold.</p><p>The fixed-point iterative scheme is implemented using three input files.</p><ul class="browser-default"><li><p><a href="#62685214-0b4b-4cf9-8b2d-8b4c0ebd942f" class="modal-trigger">master.i</a> controls the load that is being shared among all multiapps </p></li><li><p><a href="#5c45f75b-a0ca-4d3c-8d4f-56d8659c01fe" class="modal-trigger">mechanical.i</a> defines and solves the elasticity subproblem </p></li><li><p><a href="#9790332b-b708-4a1c-bda9-c0c660abd384" class="modal-trigger">fracture.i</a> defines and solves the phase-field subproblem</p></li></ul><div class="modal moose-modal" id="62685214-0b4b-4cf9-8b2d-8b4c0ebd942f"><div class="modal-content"><h4>/benchmarks/mode1_geometric_notch/master.i</h4><pre class="moose-pre"><code class="language-text">E = 2.1e5
nu = 0.3
Gc = 2.7
l = 0.015
psic = 14.88
k = 1e-09
dc = 0.6

[Problem]
  solve = false
[]

[Mesh]
  type = FileMesh
  file = &#x27;gold/geo.msh&#x27;
[]

[MultiApps]
  [./mechanical]
    type = TransientMultiApp
    input_files = &#x27;mechanical.i&#x27;
    app_type = raccoonApp
    execute_on = &#x27;TIMESTEP_BEGIN&#x27;
    sub_cycling = true
    detect_steady_state = true
    steady_state_tol = 1e-6
    cli_args = &#x27;E=${E};nu=${nu};Gc=${Gc};l=${l};psic=${psic};k=${k};dc=${dc}&#x27;
  [../]
[]

[Transfers]
  [./send_load]
    type = MultiAppScalarToAuxScalarTransfer
    multi_app = mechanical
    direction = to_multiapp
    source_variable = &#x27;load&#x27;
    to_aux_scalar = &#x27;load&#x27;
  [../]
  [./get_d_ref]
    type = MultiAppCopyTransfer
    multi_app = mechanical
    direction = from_multiapp
    source_variable = &#x27;d&#x27;
    variable = &#x27;d&#x27;
    execute_on = &#x27;TIMESTEP_END&#x27;
  [../]
  [./send_d_ref]
    type = MultiAppCopyTransfer
    multi_app = mechanical
    direction = to_multiapp
    source_variable = &#x27;d&#x27;
    variable = &#x27;d_ref&#x27;
    execute_on = &#x27;TIMESTEP_BEGIN&#x27;
  [../]
[]

[AuxVariables]
  [./load]
    family = SCALAR
  [../]
  [./d]
  [../]
[]

[AuxScalarKernels]
  [./load]
    type = FunctionScalarAux
    variable = &#x27;load&#x27;
    function = &#x27;t&#x27;
    execute_on = &#x27;INITIAL TIMESTEP_BEGIN&#x27;
  [../]
[]

[Executioner]
  type = Transient
  dt = 1e-4
  end_time = 6e-3
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5c45f75b-a0ca-4d3c-8d4f-56d8659c01fe"><div class="modal-content"><h4>/benchmarks/mode1_geometric_notch/mechanical.i</h4><pre class="moose-pre"><code class="language-text">[MultiApps]
  [./fracture]
    type = TransientMultiApp
    input_files = &#x27;fracture.i&#x27;
    app_type = raccoonApp
    execute_on = &#x27;TIMESTEP_BEGIN&#x27;
    cli_args = &#x27;Gc=${Gc};l=${l};psic=${psic};k=${k}&#x27;
  [../]
[]

[Transfers]
  [./send_E_el]
    type = MultiAppCopyTransfer
    multi_app = fracture
    direction = to_multiapp
    source_variable = &#x27;E_el&#x27;
    variable = &#x27;E_el&#x27;
  [../]
  [./send_d_ref]
    type = MultiAppCopyTransfer
    multi_app = fracture
    direction = to_multiapp
    source_variable = &#x27;d_ref&#x27;
    variable = &#x27;d_ref&#x27;
  [../]
  [./get_d]
    type = MultiAppCopyTransfer
    multi_app = fracture
    direction = from_multiapp
    source_variable = &#x27;d&#x27;
    variable = &#x27;d&#x27;
  [../]
[]

[Mesh]
  type = FileMesh
  file = &#x27;gold/geo.msh&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./d]
  [../]
  [./d_ref]
  [../]
  [./load]
    family = SCALAR
  [../]
  [./E_el]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./fy]
  [../]
[]

[AuxKernels]
  [./E_el]
    type = MaterialRealAux
    property = &#x27;E_el&#x27;
    variable = &#x27;E_el&#x27;
    execute_on = &#x27;TIMESTEP_END&#x27;
  [../]
[]

[Kernels]
  [./solid_x]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_x&#x27;
    component = 0
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./solid_y]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_y&#x27;
    component = 1
    displacements = &#x27;disp_x disp_y&#x27;
    save_in = &#x27;fy&#x27;
  [../]
[]

[BCs]
  [./ydisp]
    type = ScalarDirichletBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;top&#x27;
    scalar_var = &#x27;load&#x27;
  [../]
  [./xfix]
    type = DirichletBC
    variable = &#x27;disp_x&#x27;
    boundary = &#x27;top bottom&#x27;
    value = 0
  [../]
  [./yfix]
    type = DirichletBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;bottom&#x27;
    value = 0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = ${E}
    poissons_ratio = ${nu}
  [../]
  [./strain]
    type = ADComputeSmallStrain
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./stress]
    type = SmallStrainDegradedPK2Stress_StrainSpectral
    d = &#x27;d&#x27;
    d_crit = ${dc}
    history = false
  [../]
  [./fracture_properties]
    type = GenericFunctionMaterial
    prop_names = &#x27;energy_release_rate phase_field_regularization_length critical_fracture_energy&#x27;
    prop_values = &#x27;${Gc} ${l} ${psic}&#x27;
  [../]
  [./local_dissipation]
    type = LinearLocalDissipation
    d = d
  [../]
  [./phase_field_properties]
    type = FractureMaterial
    local_dissipation_norm = 8/3
  [../]
  [./degradation]
    type = LorentzDegradation
    d = d
    residual_degradation = ${k}
  [../]
[]

[Executioner]
  type = TransientSubcycling
  solve_type = &#x27;NEWTON&#x27;
  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu       superlu_dist&#x27;
  # petsc_options_iname = &#x27;-pc_type -sub_pc_type -ksp_max_it -ksp_gmres_restart -sub_pc_factor_levels&#x27;
  # petsc_options_value = &#x27;asm      ilu          1000        200                0                    &#x27;
  dt = 1e-6

  nl_abs_tol = 1e-08
  nl_rel_tol = 1e-06

  automatic_scaling = true
  compute_scaling_once = false
[]

[Postprocessors]
  [./Fy]
    type = NodalSum
    variable = &#x27;fy&#x27;
    boundary = &#x27;top&#x27;
  [../]
[]

[Outputs]
  print_linear_residuals = false
  [./csv]
    type = CSV
    delimiter = &#x27; &#x27;
    file_base = &#x27;force_displacement&#x27;
    time_column = false
  [../]
  [./exodus]
    type = Exodus
    file_base = &#x27;visualize&#x27;
  [../]
  [./console]
    type = Console
    hide = &#x27;load Fy&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9790332b-b708-4a1c-bda9-c0c660abd384"><div class="modal-content"><h4>/benchmarks/mode1_geometric_notch/fracture.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = FileMesh
  file = &#x27;gold/geo.msh&#x27;
[]

[Variables]
  [./d]
  [../]
[]

[AuxVariables]
  [./load]
    family = SCALAR
  [../]
  [./E_el]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./d_ref]
  [../]
  [./bounds_dummy]
  [../]
[]

[Bounds]
  [./irreversibility]
    type = Irreversibility
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    upper = 1
    lower = &#x27;d_ref&#x27;
  [../]
[]

[Kernels]
  [./react]
    type = PhaseFieldFractureEvolutionReaction
    variable = &#x27;d&#x27;
    driving_energy_var = &#x27;E_el&#x27;
  [../]
  [./diff]
    type = PhaseFieldFractureEvolutionDiffusion
    variable = &#x27;d&#x27;
  [../]
[]

[Materials]
  [./fracture_energy_barrier]
    type = GenericFunctionMaterial
    prop_names = &#x27;energy_release_rate phase_field_regularization_length critical_fracture_energy&#x27;
    prop_values = &#x27;${Gc} ${l} ${psic}&#x27;
  [../]
  [./local_dissipation]
    type = LinearLocalDissipation
    d = d
  [../]
  [./fracture_properties]
    type = FractureMaterial
    local_dissipation_norm = 8/3
  [../]
  [./degradation]
    type = LorentzDegradation
    d = d
    residual_degradation = ${k}
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options_iname = &#x27;-pc_type -snes_type&#x27;
  petsc_options_value = &#x27;lu vinewtonrsls&#x27;
  dt = 1e-6

  nl_abs_tol = 1e-08
  nl_rel_tol = 1e-06
[]

[Outputs]
  print_linear_residuals = false
  [./console]
    type = Console
    hide = &#x27;load&#x27;
    outlier_variable_norms = false
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><section class="scrollspy" id="0e35d613-86db-419e-aba2-31613293d84f" data-section-level="2" data-section-text="Load control"><h2 id="load-control">Load control</h2><p>The &quot;master.i&quot; input file controls the load step and transfers the load as well as the solutions between multiapps. Global parameters are defined at the very top of the input file:</p><pre class="moose-pre"><code class="language-text">E = 2.1e5
nu = 0.3
Gc = 2.7
l = 0.015
psic = 14.88
k = 1e-09
dc = 0.6
</code></pre><a href="#82b82e19-21c7-457b-860a-22fef1668a53" class="modal-trigger">(benchmarks/mode1_geometric_notch/master.i)</a><div class="modal moose-modal" id="82b82e19-21c7-457b-860a-22fef1668a53"><div class="modal-content"><h4>/home/gary/projects/raccoon/benchmarks/mode1_geometric_notch/master.i</h4><pre class="moose-pre"><code class="language-text">E = 2.1e5
nu = 0.3
Gc = 2.7
l = 0.015
psic = 14.88
k = 1e-09
dc = 0.6

[Problem]
  solve = false
[]

[Mesh]
  type = FileMesh
  file = &#x27;gold/geo.msh&#x27;
[]

[MultiApps]
  [./mechanical]
    type = TransientMultiApp
    input_files = &#x27;mechanical.i&#x27;
    app_type = raccoonApp
    execute_on = &#x27;TIMESTEP_BEGIN&#x27;
    sub_cycling = true
    detect_steady_state = true
    steady_state_tol = 1e-6
    cli_args = &#x27;E=${E};nu=${nu};Gc=${Gc};l=${l};psic=${psic};k=${k};dc=${dc}&#x27;
  [../]
[]

[Transfers]
  [./send_load]
    type = MultiAppScalarToAuxScalarTransfer
    multi_app = mechanical
    direction = to_multiapp
    source_variable = &#x27;load&#x27;
    to_aux_scalar = &#x27;load&#x27;
  [../]
  [./get_d_ref]
    type = MultiAppCopyTransfer
    multi_app = mechanical
    direction = from_multiapp
    source_variable = &#x27;d&#x27;
    variable = &#x27;d&#x27;
    execute_on = &#x27;TIMESTEP_END&#x27;
  [../]
  [./send_d_ref]
    type = MultiAppCopyTransfer
    multi_app = mechanical
    direction = to_multiapp
    source_variable = &#x27;d&#x27;
    variable = &#x27;d_ref&#x27;
    execute_on = &#x27;TIMESTEP_BEGIN&#x27;
  [../]
[]

[AuxVariables]
  [./load]
    family = SCALAR
  [../]
  [./d]
  [../]
[]

[AuxScalarKernels]
  [./load]
    type = FunctionScalarAux
    variable = &#x27;load&#x27;
    function = &#x27;t&#x27;
    execute_on = &#x27;INITIAL TIMESTEP_BEGIN&#x27;
  [../]
[]

[Executioner]
  type = Transient
  dt = 1e-4
  end_time = 6e-3
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><p>The master app need not solve for anything, so we have</p><pre class="moose-pre"><code class="language-text">[Problem]
  solve = false
[]
</code></pre><a href="#ad17a1d0-20ab-441f-aa83-a0f85bb4e717" class="modal-trigger">(benchmarks/mode1_geometric_notch/master.i)</a><div class="modal moose-modal" id="ad17a1d0-20ab-441f-aa83-a0f85bb4e717"><div class="modal-content"><h4>/home/gary/projects/raccoon/benchmarks/mode1_geometric_notch/master.i</h4><pre class="moose-pre"><code class="language-text">E = 2.1e5
nu = 0.3
Gc = 2.7
l = 0.015
psic = 14.88
k = 1e-09
dc = 0.6

[Problem]
  solve = false
[]

[Mesh]
  type = FileMesh
  file = &#x27;gold/geo.msh&#x27;
[]

[MultiApps]
  [./mechanical]
    type = TransientMultiApp
    input_files = &#x27;mechanical.i&#x27;
    app_type = raccoonApp
    execute_on = &#x27;TIMESTEP_BEGIN&#x27;
    sub_cycling = true
    detect_steady_state = true
    steady_state_tol = 1e-6
    cli_args = &#x27;E=${E};nu=${nu};Gc=${Gc};l=${l};psic=${psic};k=${k};dc=${dc}&#x27;
  [../]
[]

[Transfers]
  [./send_load]
    type = MultiAppScalarToAuxScalarTransfer
    multi_app = mechanical
    direction = to_multiapp
    source_variable = &#x27;load&#x27;
    to_aux_scalar = &#x27;load&#x27;
  [../]
  [./get_d_ref]
    type = MultiAppCopyTransfer
    multi_app = mechanical
    direction = from_multiapp
    source_variable = &#x27;d&#x27;
    variable = &#x27;d&#x27;
    execute_on = &#x27;TIMESTEP_END&#x27;
  [../]
  [./send_d_ref]
    type = MultiAppCopyTransfer
    multi_app = mechanical
    direction = to_multiapp
    source_variable = &#x27;d&#x27;
    variable = &#x27;d_ref&#x27;
    execute_on = &#x27;TIMESTEP_BEGIN&#x27;
  [../]
[]

[AuxVariables]
  [./load]
    family = SCALAR
  [../]
  [./d]
  [../]
[]

[AuxScalarKernels]
  [./load]
    type = FunctionScalarAux
    variable = &#x27;load&#x27;
    function = &#x27;t&#x27;
    execute_on = &#x27;INITIAL TIMESTEP_BEGIN&#x27;
  [../]
[]

[Executioner]
  type = Transient
  dt = 1e-4
  end_time = 6e-3
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><p>The elasticity subproblem defined in &quot;mechanical.i&quot; is a MultiApp of master. The fixed-point iteration is applied by enabling subcycling of the mechanical subapp:</p><pre class="moose-pre"><code class="language-text">[MultiApps]
  [./mechanical]
    type = TransientMultiApp
    input_files = &#x27;mechanical.i&#x27;
    app_type = raccoonApp
    execute_on = &#x27;TIMESTEP_BEGIN&#x27;
    sub_cycling = true
    detect_steady_state = true
    steady_state_tol = 1e-6
    cli_args = &#x27;E=${E};nu=${nu};Gc=${Gc};l=${l};psic=${psic};k=${k};dc=${dc}&#x27;
  [../]
[]
</code></pre><a href="#60bff59c-fae8-4604-a018-1f244586710a" class="modal-trigger">(benchmarks/mode1_geometric_notch/master.i)</a><div class="modal moose-modal" id="60bff59c-fae8-4604-a018-1f244586710a"><div class="modal-content"><h4>/home/gary/projects/raccoon/benchmarks/mode1_geometric_notch/master.i</h4><pre class="moose-pre"><code class="language-text">E = 2.1e5
nu = 0.3
Gc = 2.7
l = 0.015
psic = 14.88
k = 1e-09
dc = 0.6

[Problem]
  solve = false
[]

[Mesh]
  type = FileMesh
  file = &#x27;gold/geo.msh&#x27;
[]

[MultiApps]
  [./mechanical]
    type = TransientMultiApp
    input_files = &#x27;mechanical.i&#x27;
    app_type = raccoonApp
    execute_on = &#x27;TIMESTEP_BEGIN&#x27;
    sub_cycling = true
    detect_steady_state = true
    steady_state_tol = 1e-6
    cli_args = &#x27;E=${E};nu=${nu};Gc=${Gc};l=${l};psic=${psic};k=${k};dc=${dc}&#x27;
  [../]
[]

[Transfers]
  [./send_load]
    type = MultiAppScalarToAuxScalarTransfer
    multi_app = mechanical
    direction = to_multiapp
    source_variable = &#x27;load&#x27;
    to_aux_scalar = &#x27;load&#x27;
  [../]
  [./get_d_ref]
    type = MultiAppCopyTransfer
    multi_app = mechanical
    direction = from_multiapp
    source_variable = &#x27;d&#x27;
    variable = &#x27;d&#x27;
    execute_on = &#x27;TIMESTEP_END&#x27;
  [../]
  [./send_d_ref]
    type = MultiAppCopyTransfer
    multi_app = mechanical
    direction = to_multiapp
    source_variable = &#x27;d&#x27;
    variable = &#x27;d_ref&#x27;
    execute_on = &#x27;TIMESTEP_BEGIN&#x27;
  [../]
[]

[AuxVariables]
  [./load]
    family = SCALAR
  [../]
  [./d]
  [../]
[]

[AuxScalarKernels]
  [./load]
    type = FunctionScalarAux
    variable = &#x27;load&#x27;
    function = &#x27;t&#x27;
    execute_on = &#x27;INITIAL TIMESTEP_BEGIN&#x27;
  [../]
[]

[Executioner]
  type = Transient
  dt = 1e-4
  end_time = 6e-3
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="card moose-alert moose-alert-note"><div class="card-title moose-alert-title"><span class="moose-alert-title-brand">note</span></div><div class="card-content"><div class="moose-alert-content"><p><p>The global parameters are transferred to MultiApps via <code>cli_args</code></p></p></div></div></div><p><code>load</code> is a scalar variable defining the magnitude of the load in current load step. It is transferred to the mechanical MultiApp from master:</p><pre class="moose-pre"><code class="language-text">[./send_load]
  type = MultiAppScalarToAuxScalarTransfer
  multi_app = mechanical
  direction = to_multiapp
  source_variable = &#x27;load&#x27;
  to_aux_scalar = &#x27;load&#x27;
[../]
</code></pre><a href="#e42639c2-c0f1-46aa-abf3-06d808094ba1" class="modal-trigger">(benchmarks/mode1_geometric_notch/master.i)</a><div class="modal moose-modal" id="e42639c2-c0f1-46aa-abf3-06d808094ba1"><div class="modal-content"><h4>/home/gary/projects/raccoon/benchmarks/mode1_geometric_notch/master.i</h4><pre class="moose-pre"><code class="language-text">E = 2.1e5
nu = 0.3
Gc = 2.7
l = 0.015
psic = 14.88
k = 1e-09
dc = 0.6

[Problem]
  solve = false
[]

[Mesh]
  type = FileMesh
  file = &#x27;gold/geo.msh&#x27;
[]

[MultiApps]
  [./mechanical]
    type = TransientMultiApp
    input_files = &#x27;mechanical.i&#x27;
    app_type = raccoonApp
    execute_on = &#x27;TIMESTEP_BEGIN&#x27;
    sub_cycling = true
    detect_steady_state = true
    steady_state_tol = 1e-6
    cli_args = &#x27;E=${E};nu=${nu};Gc=${Gc};l=${l};psic=${psic};k=${k};dc=${dc}&#x27;
  [../]
[]

[Transfers]
  [./send_load]
    type = MultiAppScalarToAuxScalarTransfer
    multi_app = mechanical
    direction = to_multiapp
    source_variable = &#x27;load&#x27;
    to_aux_scalar = &#x27;load&#x27;
  [../]
  [./get_d_ref]
    type = MultiAppCopyTransfer
    multi_app = mechanical
    direction = from_multiapp
    source_variable = &#x27;d&#x27;
    variable = &#x27;d&#x27;
    execute_on = &#x27;TIMESTEP_END&#x27;
  [../]
  [./send_d_ref]
    type = MultiAppCopyTransfer
    multi_app = mechanical
    direction = to_multiapp
    source_variable = &#x27;d&#x27;
    variable = &#x27;d_ref&#x27;
    execute_on = &#x27;TIMESTEP_BEGIN&#x27;
  [../]
[]

[AuxVariables]
  [./load]
    family = SCALAR
  [../]
  [./d]
  [../]
[]

[AuxScalarKernels]
  [./load]
    type = FunctionScalarAux
    variable = &#x27;load&#x27;
    function = &#x27;t&#x27;
    execute_on = &#x27;INITIAL TIMESTEP_BEGIN&#x27;
  [../]
[]

[Executioner]
  type = Transient
  dt = 1e-4
  end_time = 6e-3
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><p>The mechanical (and the fracture) MultiApp then solves the field equations and transfers the damage back to master. The master App keeps track of the damage variable such that it is applied as the lower bound in the fracture MultiApp. To achieve that, the transfer block looks like</p><pre class="moose-pre"><code class="language-text">[./get_d_ref]
  type = MultiAppCopyTransfer
  multi_app = mechanical
  direction = from_multiapp
  source_variable = &#x27;d&#x27;
  variable = &#x27;d&#x27;
  execute_on = &#x27;TIMESTEP_END&#x27;
[../]

[./send_d_ref]
  type = MultiAppCopyTransfer
  multi_app = mechanical
  direction = to_multiapp
  source_variable = &#x27;d&#x27;
  variable = &#x27;d_ref&#x27;
  execute_on = &#x27;TIMESTEP_BEGIN&#x27;
[../]
</code></pre><a href="#bd460d74-25da-4294-abba-73e05d1a81f2" class="modal-trigger">(benchmarks/mode1_geometric_notch/master.i)</a><div class="modal moose-modal" id="bd460d74-25da-4294-abba-73e05d1a81f2"><div class="modal-content"><h4>/home/gary/projects/raccoon/benchmarks/mode1_geometric_notch/master.i</h4><pre class="moose-pre"><code class="language-text">E = 2.1e5
nu = 0.3
Gc = 2.7
l = 0.015
psic = 14.88
k = 1e-09
dc = 0.6

[Problem]
  solve = false
[]

[Mesh]
  type = FileMesh
  file = &#x27;gold/geo.msh&#x27;
[]

[MultiApps]
  [./mechanical]
    type = TransientMultiApp
    input_files = &#x27;mechanical.i&#x27;
    app_type = raccoonApp
    execute_on = &#x27;TIMESTEP_BEGIN&#x27;
    sub_cycling = true
    detect_steady_state = true
    steady_state_tol = 1e-6
    cli_args = &#x27;E=${E};nu=${nu};Gc=${Gc};l=${l};psic=${psic};k=${k};dc=${dc}&#x27;
  [../]
[]

[Transfers]
  [./send_load]
    type = MultiAppScalarToAuxScalarTransfer
    multi_app = mechanical
    direction = to_multiapp
    source_variable = &#x27;load&#x27;
    to_aux_scalar = &#x27;load&#x27;
  [../]
  [./get_d_ref]
    type = MultiAppCopyTransfer
    multi_app = mechanical
    direction = from_multiapp
    source_variable = &#x27;d&#x27;
    variable = &#x27;d&#x27;
    execute_on = &#x27;TIMESTEP_END&#x27;
  [../]
  [./send_d_ref]
    type = MultiAppCopyTransfer
    multi_app = mechanical
    direction = to_multiapp
    source_variable = &#x27;d&#x27;
    variable = &#x27;d_ref&#x27;
    execute_on = &#x27;TIMESTEP_BEGIN&#x27;
  [../]
[]

[AuxVariables]
  [./load]
    family = SCALAR
  [../]
  [./d]
  [../]
[]

[AuxScalarKernels]
  [./load]
    type = FunctionScalarAux
    variable = &#x27;load&#x27;
    function = &#x27;t&#x27;
    execute_on = &#x27;INITIAL TIMESTEP_BEGIN&#x27;
  [../]
[]

[Executioner]
  type = Transient
  dt = 1e-4
  end_time = 6e-3
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></section><section class="scrollspy" id="8146b84b-018f-4be0-9f45-62f1d9723bc4" data-section-level="2" data-section-text="The elasticity subproblem"><h2 id="the-elasticity-subproblem">The elasticity subproblem</h2><p>The &quot;mechanical.i&quot; input file defines and solves the elasticity subproblem. Two kernels define the residual term <span tex="\xstress_{ij,j}" bookmark="moose-equation-55d5af9c-8578-43af-852d-13c231e934b1" recursive="True" class="moose-katex-inline-equation" id="moose-equation-55d5af9c-8578-43af-852d-13c231e934b1"><script>var element = document.getElementById("moose-equation-55d5af9c-8578-43af-852d-13c231e934b1");katex.render("\\xstress_{ij,j}", element, {displayMode:false,throwOnError:false,macros:{"\\bs":"\\boldsymbol{#1}","\\normal":"\\bs{n}","\\divergence":"\\nabla \\cdot","\\norm":"\\left\\lVert#1\\right\\rVert","\\dArea":"\\text{ d}A","\\dVolume":"\\text{ d}V","\\total":"\\text{total}","\\internal":"\\text{internal}","\\external":"\\text{external}","\\elastic":"\\text{elastic}","\\fracture":"\\text{fracture}","\\critical":"\\text{critical}","\\activeenergy":"{\\left< A \\right>}","\\inactiveenergy":"{\\left< I \\right>}","\\Gc":"\\mathcal{G}_c","\\strain":"\\bs{\\varepsilon}","\\stress":"\\bs{\\sigma}","\\xstress":"\\widetilde{\\stress}","\\macaulay":"\\left<#1\\right>"}});</script></span>:</p><pre class="moose-pre"><code class="language-text">[AuxKernels]
  [./E_el]
    type = MaterialRealAux
    property = &#x27;E_el&#x27;
    variable = &#x27;E_el&#x27;
    execute_on = &#x27;TIMESTEP_END&#x27;
  [../]
[]
</code></pre><a href="#30d92cfd-54cf-4b6f-859a-eee7f4bcb92b" class="modal-trigger">(benchmarks/mode1_geometric_notch/mechanical.i)</a><div class="modal moose-modal" id="30d92cfd-54cf-4b6f-859a-eee7f4bcb92b"><div class="modal-content"><h4>/home/gary/projects/raccoon/benchmarks/mode1_geometric_notch/mechanical.i</h4><pre class="moose-pre"><code class="language-text">[MultiApps]
  [./fracture]
    type = TransientMultiApp
    input_files = &#x27;fracture.i&#x27;
    app_type = raccoonApp
    execute_on = &#x27;TIMESTEP_BEGIN&#x27;
    cli_args = &#x27;Gc=${Gc};l=${l};psic=${psic};k=${k}&#x27;
  [../]
[]

[Transfers]
  [./send_E_el]
    type = MultiAppCopyTransfer
    multi_app = fracture
    direction = to_multiapp
    source_variable = &#x27;E_el&#x27;
    variable = &#x27;E_el&#x27;
  [../]
  [./send_d_ref]
    type = MultiAppCopyTransfer
    multi_app = fracture
    direction = to_multiapp
    source_variable = &#x27;d_ref&#x27;
    variable = &#x27;d_ref&#x27;
  [../]
  [./get_d]
    type = MultiAppCopyTransfer
    multi_app = fracture
    direction = from_multiapp
    source_variable = &#x27;d&#x27;
    variable = &#x27;d&#x27;
  [../]
[]

[Mesh]
  type = FileMesh
  file = &#x27;gold/geo.msh&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./d]
  [../]
  [./d_ref]
  [../]
  [./load]
    family = SCALAR
  [../]
  [./E_el]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./fy]
  [../]
[]

[AuxKernels]
  [./E_el]
    type = MaterialRealAux
    property = &#x27;E_el&#x27;
    variable = &#x27;E_el&#x27;
    execute_on = &#x27;TIMESTEP_END&#x27;
  [../]
[]

[Kernels]
  [./solid_x]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_x&#x27;
    component = 0
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./solid_y]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_y&#x27;
    component = 1
    displacements = &#x27;disp_x disp_y&#x27;
    save_in = &#x27;fy&#x27;
  [../]
[]

[BCs]
  [./ydisp]
    type = ScalarDirichletBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;top&#x27;
    scalar_var = &#x27;load&#x27;
  [../]
  [./xfix]
    type = DirichletBC
    variable = &#x27;disp_x&#x27;
    boundary = &#x27;top bottom&#x27;
    value = 0
  [../]
  [./yfix]
    type = DirichletBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;bottom&#x27;
    value = 0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = ${E}
    poissons_ratio = ${nu}
  [../]
  [./strain]
    type = ADComputeSmallStrain
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./stress]
    type = SmallStrainDegradedPK2Stress_StrainSpectral
    d = &#x27;d&#x27;
    d_crit = ${dc}
    history = false
  [../]
  [./fracture_properties]
    type = GenericFunctionMaterial
    prop_names = &#x27;energy_release_rate phase_field_regularization_length critical_fracture_energy&#x27;
    prop_values = &#x27;${Gc} ${l} ${psic}&#x27;
  [../]
  [./local_dissipation]
    type = LinearLocalDissipation
    d = d
  [../]
  [./phase_field_properties]
    type = FractureMaterial
    local_dissipation_norm = 8/3
  [../]
  [./degradation]
    type = LorentzDegradation
    d = d
    residual_degradation = ${k}
  [../]
[]

[Executioner]
  type = TransientSubcycling
  solve_type = &#x27;NEWTON&#x27;
  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu       superlu_dist&#x27;
  # petsc_options_iname = &#x27;-pc_type -sub_pc_type -ksp_max_it -ksp_gmres_restart -sub_pc_factor_levels&#x27;
  # petsc_options_value = &#x27;asm      ilu          1000        200                0                    &#x27;
  dt = 1e-6

  nl_abs_tol = 1e-08
  nl_rel_tol = 1e-06

  automatic_scaling = true
  compute_scaling_once = false
[]

[Postprocessors]
  [./Fy]
    type = NodalSum
    variable = &#x27;fy&#x27;
    boundary = &#x27;top&#x27;
  [../]
[]

[Outputs]
  print_linear_residuals = false
  [./csv]
    type = CSV
    delimiter = &#x27; &#x27;
    file_base = &#x27;force_displacement&#x27;
    time_column = false
  [../]
  [./exodus]
    type = Exodus
    file_base = &#x27;visualize&#x27;
  [../]
  [./console]
    type = Console
    hide = &#x27;load Fy&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="card moose-alert moose-alert-note"><div class="card-title moose-alert-title"><span class="moose-alert-title-brand">note</span></div><div class="card-content"><div class="moose-alert-content"><p><p>Upon convergence, residual at Dirichlet DoFs are volumetric reaction forces. Those values are saved in <code>fy</code> and are summed by a postprocessor to get the reaction force in y direction.</p></p></div></div></div><p>Boundary conditions are defined according to <a href="#mode1_bcs">Figure 1</a>:</p><pre class="moose-pre"><code class="language-text">[BCs]
  [./ydisp]
    type = ScalarDirichletBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;top&#x27;
    scalar_var = &#x27;load&#x27;
  [../]
  [./xfix]
    type = DirichletBC
    variable = &#x27;disp_x&#x27;
    boundary = &#x27;top bottom&#x27;
    value = 0
  [../]
  [./yfix]
    type = DirichletBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;bottom&#x27;
    value = 0
  [../]
[]
</code></pre><a href="#eda1f985-7f79-4d57-b550-fd61eb8e1305" class="modal-trigger">(benchmarks/mode1_geometric_notch/mechanical.i)</a><div class="modal moose-modal" id="eda1f985-7f79-4d57-b550-fd61eb8e1305"><div class="modal-content"><h4>/home/gary/projects/raccoon/benchmarks/mode1_geometric_notch/mechanical.i</h4><pre class="moose-pre"><code class="language-text">[MultiApps]
  [./fracture]
    type = TransientMultiApp
    input_files = &#x27;fracture.i&#x27;
    app_type = raccoonApp
    execute_on = &#x27;TIMESTEP_BEGIN&#x27;
    cli_args = &#x27;Gc=${Gc};l=${l};psic=${psic};k=${k}&#x27;
  [../]
[]

[Transfers]
  [./send_E_el]
    type = MultiAppCopyTransfer
    multi_app = fracture
    direction = to_multiapp
    source_variable = &#x27;E_el&#x27;
    variable = &#x27;E_el&#x27;
  [../]
  [./send_d_ref]
    type = MultiAppCopyTransfer
    multi_app = fracture
    direction = to_multiapp
    source_variable = &#x27;d_ref&#x27;
    variable = &#x27;d_ref&#x27;
  [../]
  [./get_d]
    type = MultiAppCopyTransfer
    multi_app = fracture
    direction = from_multiapp
    source_variable = &#x27;d&#x27;
    variable = &#x27;d&#x27;
  [../]
[]

[Mesh]
  type = FileMesh
  file = &#x27;gold/geo.msh&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./d]
  [../]
  [./d_ref]
  [../]
  [./load]
    family = SCALAR
  [../]
  [./E_el]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./fy]
  [../]
[]

[AuxKernels]
  [./E_el]
    type = MaterialRealAux
    property = &#x27;E_el&#x27;
    variable = &#x27;E_el&#x27;
    execute_on = &#x27;TIMESTEP_END&#x27;
  [../]
[]

[Kernels]
  [./solid_x]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_x&#x27;
    component = 0
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./solid_y]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_y&#x27;
    component = 1
    displacements = &#x27;disp_x disp_y&#x27;
    save_in = &#x27;fy&#x27;
  [../]
[]

[BCs]
  [./ydisp]
    type = ScalarDirichletBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;top&#x27;
    scalar_var = &#x27;load&#x27;
  [../]
  [./xfix]
    type = DirichletBC
    variable = &#x27;disp_x&#x27;
    boundary = &#x27;top bottom&#x27;
    value = 0
  [../]
  [./yfix]
    type = DirichletBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;bottom&#x27;
    value = 0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = ${E}
    poissons_ratio = ${nu}
  [../]
  [./strain]
    type = ADComputeSmallStrain
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./stress]
    type = SmallStrainDegradedPK2Stress_StrainSpectral
    d = &#x27;d&#x27;
    d_crit = ${dc}
    history = false
  [../]
  [./fracture_properties]
    type = GenericFunctionMaterial
    prop_names = &#x27;energy_release_rate phase_field_regularization_length critical_fracture_energy&#x27;
    prop_values = &#x27;${Gc} ${l} ${psic}&#x27;
  [../]
  [./local_dissipation]
    type = LinearLocalDissipation
    d = d
  [../]
  [./phase_field_properties]
    type = FractureMaterial
    local_dissipation_norm = 8/3
  [../]
  [./degradation]
    type = LorentzDegradation
    d = d
    residual_degradation = ${k}
  [../]
[]

[Executioner]
  type = TransientSubcycling
  solve_type = &#x27;NEWTON&#x27;
  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu       superlu_dist&#x27;
  # petsc_options_iname = &#x27;-pc_type -sub_pc_type -ksp_max_it -ksp_gmres_restart -sub_pc_factor_levels&#x27;
  # petsc_options_value = &#x27;asm      ilu          1000        200                0                    &#x27;
  dt = 1e-6

  nl_abs_tol = 1e-08
  nl_rel_tol = 1e-06

  automatic_scaling = true
  compute_scaling_once = false
[]

[Postprocessors]
  [./Fy]
    type = NodalSum
    variable = &#x27;fy&#x27;
    boundary = &#x27;top&#x27;
  [../]
[]

[Outputs]
  print_linear_residuals = false
  [./csv]
    type = CSV
    delimiter = &#x27; &#x27;
    file_base = &#x27;force_displacement&#x27;
    time_column = false
  [../]
  [./exodus]
    type = Exodus
    file_base = &#x27;visualize&#x27;
  [../]
  [./console]
    type = Console
    hide = &#x27;load Fy&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><p>At the end of each time step, the fracture driving energy is saved in an auxiliary variable:</p><pre class="moose-pre"><code class="language-text">[AuxKernels]
  [./E_el]
    type = MaterialRealAux
    property = &#x27;E_el&#x27;
    variable = &#x27;E_el&#x27;
    execute_on = &#x27;TIMESTEP_END&#x27;
  [../]
[]
</code></pre><a href="#09b9cc03-e11f-4bf1-b0d8-0cdba856843e" class="modal-trigger">(benchmarks/mode1_geometric_notch/mechanical.i)</a><div class="modal moose-modal" id="09b9cc03-e11f-4bf1-b0d8-0cdba856843e"><div class="modal-content"><h4>/home/gary/projects/raccoon/benchmarks/mode1_geometric_notch/mechanical.i</h4><pre class="moose-pre"><code class="language-text">[MultiApps]
  [./fracture]
    type = TransientMultiApp
    input_files = &#x27;fracture.i&#x27;
    app_type = raccoonApp
    execute_on = &#x27;TIMESTEP_BEGIN&#x27;
    cli_args = &#x27;Gc=${Gc};l=${l};psic=${psic};k=${k}&#x27;
  [../]
[]

[Transfers]
  [./send_E_el]
    type = MultiAppCopyTransfer
    multi_app = fracture
    direction = to_multiapp
    source_variable = &#x27;E_el&#x27;
    variable = &#x27;E_el&#x27;
  [../]
  [./send_d_ref]
    type = MultiAppCopyTransfer
    multi_app = fracture
    direction = to_multiapp
    source_variable = &#x27;d_ref&#x27;
    variable = &#x27;d_ref&#x27;
  [../]
  [./get_d]
    type = MultiAppCopyTransfer
    multi_app = fracture
    direction = from_multiapp
    source_variable = &#x27;d&#x27;
    variable = &#x27;d&#x27;
  [../]
[]

[Mesh]
  type = FileMesh
  file = &#x27;gold/geo.msh&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./d]
  [../]
  [./d_ref]
  [../]
  [./load]
    family = SCALAR
  [../]
  [./E_el]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./fy]
  [../]
[]

[AuxKernels]
  [./E_el]
    type = MaterialRealAux
    property = &#x27;E_el&#x27;
    variable = &#x27;E_el&#x27;
    execute_on = &#x27;TIMESTEP_END&#x27;
  [../]
[]

[Kernels]
  [./solid_x]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_x&#x27;
    component = 0
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./solid_y]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_y&#x27;
    component = 1
    displacements = &#x27;disp_x disp_y&#x27;
    save_in = &#x27;fy&#x27;
  [../]
[]

[BCs]
  [./ydisp]
    type = ScalarDirichletBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;top&#x27;
    scalar_var = &#x27;load&#x27;
  [../]
  [./xfix]
    type = DirichletBC
    variable = &#x27;disp_x&#x27;
    boundary = &#x27;top bottom&#x27;
    value = 0
  [../]
  [./yfix]
    type = DirichletBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;bottom&#x27;
    value = 0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = ${E}
    poissons_ratio = ${nu}
  [../]
  [./strain]
    type = ADComputeSmallStrain
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./stress]
    type = SmallStrainDegradedPK2Stress_StrainSpectral
    d = &#x27;d&#x27;
    d_crit = ${dc}
    history = false
  [../]
  [./fracture_properties]
    type = GenericFunctionMaterial
    prop_names = &#x27;energy_release_rate phase_field_regularization_length critical_fracture_energy&#x27;
    prop_values = &#x27;${Gc} ${l} ${psic}&#x27;
  [../]
  [./local_dissipation]
    type = LinearLocalDissipation
    d = d
  [../]
  [./phase_field_properties]
    type = FractureMaterial
    local_dissipation_norm = 8/3
  [../]
  [./degradation]
    type = LorentzDegradation
    d = d
    residual_degradation = ${k}
  [../]
[]

[Executioner]
  type = TransientSubcycling
  solve_type = &#x27;NEWTON&#x27;
  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu       superlu_dist&#x27;
  # petsc_options_iname = &#x27;-pc_type -sub_pc_type -ksp_max_it -ksp_gmres_restart -sub_pc_factor_levels&#x27;
  # petsc_options_value = &#x27;asm      ilu          1000        200                0                    &#x27;
  dt = 1e-6

  nl_abs_tol = 1e-08
  nl_rel_tol = 1e-06

  automatic_scaling = true
  compute_scaling_once = false
[]

[Postprocessors]
  [./Fy]
    type = NodalSum
    variable = &#x27;fy&#x27;
    boundary = &#x27;top&#x27;
  [../]
[]

[Outputs]
  print_linear_residuals = false
  [./csv]
    type = CSV
    delimiter = &#x27; &#x27;
    file_base = &#x27;force_displacement&#x27;
    time_column = false
  [../]
  [./exodus]
    type = Exodus
    file_base = &#x27;visualize&#x27;
  [../]
  [./console]
    type = Console
    hide = &#x27;load Fy&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><p>which is transferred to the fracture MultiApp to define the damage evolution equation:</p><pre class="moose-pre"><code class="language-text">[./send_E_el]
  type = MultiAppCopyTransfer
  multi_app = fracture
  direction = to_multiapp
  source_variable = &#x27;E_el&#x27;
  variable = &#x27;E_el&#x27;
[../]
</code></pre><a href="#16d6634b-d769-4d3f-b523-bba954abca2d" class="modal-trigger">(benchmarks/mode1_geometric_notch/mechanical.i)</a><div class="modal moose-modal" id="16d6634b-d769-4d3f-b523-bba954abca2d"><div class="modal-content"><h4>/home/gary/projects/raccoon/benchmarks/mode1_geometric_notch/mechanical.i</h4><pre class="moose-pre"><code class="language-text">[MultiApps]
  [./fracture]
    type = TransientMultiApp
    input_files = &#x27;fracture.i&#x27;
    app_type = raccoonApp
    execute_on = &#x27;TIMESTEP_BEGIN&#x27;
    cli_args = &#x27;Gc=${Gc};l=${l};psic=${psic};k=${k}&#x27;
  [../]
[]

[Transfers]
  [./send_E_el]
    type = MultiAppCopyTransfer
    multi_app = fracture
    direction = to_multiapp
    source_variable = &#x27;E_el&#x27;
    variable = &#x27;E_el&#x27;
  [../]
  [./send_d_ref]
    type = MultiAppCopyTransfer
    multi_app = fracture
    direction = to_multiapp
    source_variable = &#x27;d_ref&#x27;
    variable = &#x27;d_ref&#x27;
  [../]
  [./get_d]
    type = MultiAppCopyTransfer
    multi_app = fracture
    direction = from_multiapp
    source_variable = &#x27;d&#x27;
    variable = &#x27;d&#x27;
  [../]
[]

[Mesh]
  type = FileMesh
  file = &#x27;gold/geo.msh&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./d]
  [../]
  [./d_ref]
  [../]
  [./load]
    family = SCALAR
  [../]
  [./E_el]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./fy]
  [../]
[]

[AuxKernels]
  [./E_el]
    type = MaterialRealAux
    property = &#x27;E_el&#x27;
    variable = &#x27;E_el&#x27;
    execute_on = &#x27;TIMESTEP_END&#x27;
  [../]
[]

[Kernels]
  [./solid_x]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_x&#x27;
    component = 0
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./solid_y]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_y&#x27;
    component = 1
    displacements = &#x27;disp_x disp_y&#x27;
    save_in = &#x27;fy&#x27;
  [../]
[]

[BCs]
  [./ydisp]
    type = ScalarDirichletBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;top&#x27;
    scalar_var = &#x27;load&#x27;
  [../]
  [./xfix]
    type = DirichletBC
    variable = &#x27;disp_x&#x27;
    boundary = &#x27;top bottom&#x27;
    value = 0
  [../]
  [./yfix]
    type = DirichletBC
    variable = &#x27;disp_y&#x27;
    boundary = &#x27;bottom&#x27;
    value = 0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = ${E}
    poissons_ratio = ${nu}
  [../]
  [./strain]
    type = ADComputeSmallStrain
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./stress]
    type = SmallStrainDegradedPK2Stress_StrainSpectral
    d = &#x27;d&#x27;
    d_crit = ${dc}
    history = false
  [../]
  [./fracture_properties]
    type = GenericFunctionMaterial
    prop_names = &#x27;energy_release_rate phase_field_regularization_length critical_fracture_energy&#x27;
    prop_values = &#x27;${Gc} ${l} ${psic}&#x27;
  [../]
  [./local_dissipation]
    type = LinearLocalDissipation
    d = d
  [../]
  [./phase_field_properties]
    type = FractureMaterial
    local_dissipation_norm = 8/3
  [../]
  [./degradation]
    type = LorentzDegradation
    d = d
    residual_degradation = ${k}
  [../]
[]

[Executioner]
  type = TransientSubcycling
  solve_type = &#x27;NEWTON&#x27;
  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu       superlu_dist&#x27;
  # petsc_options_iname = &#x27;-pc_type -sub_pc_type -ksp_max_it -ksp_gmres_restart -sub_pc_factor_levels&#x27;
  # petsc_options_value = &#x27;asm      ilu          1000        200                0                    &#x27;
  dt = 1e-6

  nl_abs_tol = 1e-08
  nl_rel_tol = 1e-06

  automatic_scaling = true
  compute_scaling_once = false
[]

[Postprocessors]
  [./Fy]
    type = NodalSum
    variable = &#x27;fy&#x27;
    boundary = &#x27;top&#x27;
  [../]
[]

[Outputs]
  print_linear_residuals = false
  [./csv]
    type = CSV
    delimiter = &#x27; &#x27;
    file_base = &#x27;force_displacement&#x27;
    time_column = false
  [../]
  [./exodus]
    type = Exodus
    file_base = &#x27;visualize&#x27;
  [../]
  [./console]
    type = Console
    hide = &#x27;load Fy&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></section><section class="scrollspy" id="23c4d0d2-a7f4-44f1-bce2-e86e9be3aa49" data-section-level="2" data-section-text="The fracture subproblem"><h2 id="the-fracture-subproblem">The fracture subproblem</h2><p>The &quot;fracture.i&quot; input file defines and solves the elasticity subproblem. Two kernels define the residual of the damage evolution equation:</p><pre class="moose-pre"><code class="language-text">[Kernels]
  [./react]
    type = PhaseFieldFractureEvolutionReaction
    variable = &#x27;d&#x27;
    driving_energy_var = &#x27;E_el&#x27;
  [../]
  [./diff]
    type = PhaseFieldFractureEvolutionDiffusion
    variable = &#x27;d&#x27;
  [../]
[]
</code></pre><a href="#1c53bc87-b8ab-42d8-96c7-31d2a990281e" class="modal-trigger">(benchmarks/mode1_geometric_notch/fracture.i)</a><div class="modal moose-modal" id="1c53bc87-b8ab-42d8-96c7-31d2a990281e"><div class="modal-content"><h4>/home/gary/projects/raccoon/benchmarks/mode1_geometric_notch/fracture.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = FileMesh
  file = &#x27;gold/geo.msh&#x27;
[]

[Variables]
  [./d]
  [../]
[]

[AuxVariables]
  [./load]
    family = SCALAR
  [../]
  [./E_el]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./d_ref]
  [../]
  [./bounds_dummy]
  [../]
[]

[Bounds]
  [./irreversibility]
    type = Irreversibility
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    upper = 1
    lower = &#x27;d_ref&#x27;
  [../]
[]

[Kernels]
  [./react]
    type = PhaseFieldFractureEvolutionReaction
    variable = &#x27;d&#x27;
    driving_energy_var = &#x27;E_el&#x27;
  [../]
  [./diff]
    type = PhaseFieldFractureEvolutionDiffusion
    variable = &#x27;d&#x27;
  [../]
[]

[Materials]
  [./fracture_energy_barrier]
    type = GenericFunctionMaterial
    prop_names = &#x27;energy_release_rate phase_field_regularization_length critical_fracture_energy&#x27;
    prop_values = &#x27;${Gc} ${l} ${psic}&#x27;
  [../]
  [./local_dissipation]
    type = LinearLocalDissipation
    d = d
  [../]
  [./fracture_properties]
    type = FractureMaterial
    local_dissipation_norm = 8/3
  [../]
  [./degradation]
    type = LorentzDegradation
    d = d
    residual_degradation = ${k}
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options_iname = &#x27;-pc_type -snes_type&#x27;
  petsc_options_value = &#x27;lu vinewtonrsls&#x27;
  dt = 1e-6

  nl_abs_tol = 1e-08
  nl_rel_tol = 1e-06
[]

[Outputs]
  print_linear_residuals = false
  [./console]
    type = Console
    hide = &#x27;load&#x27;
    outlier_variable_norms = false
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="card moose-alert moose-alert-note"><div class="card-title moose-alert-title"><span class="moose-alert-title-brand">note</span></div><div class="card-content"><div class="moose-alert-content"><p><p>The fracture driving energy is defined by an auxiliary variable retrieved from the mechanical MultiApp <code>E_el</code>.</p></p></div></div></div><p>Irreversibility of damage is enforced as a variation inequality:</p><pre class="moose-pre"><code class="language-text">[Bounds]
  [./irreversibility]
    type = Irreversibility
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    upper = 1
    lower = &#x27;d_ref&#x27;
  [../]
[]
</code></pre><a href="#2e431878-cde8-4c7f-bd1f-cea3fdf3d002" class="modal-trigger">(benchmarks/mode1_geometric_notch/fracture.i)</a><div class="modal moose-modal" id="2e431878-cde8-4c7f-bd1f-cea3fdf3d002"><div class="modal-content"><h4>/home/gary/projects/raccoon/benchmarks/mode1_geometric_notch/fracture.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = FileMesh
  file = &#x27;gold/geo.msh&#x27;
[]

[Variables]
  [./d]
  [../]
[]

[AuxVariables]
  [./load]
    family = SCALAR
  [../]
  [./E_el]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./d_ref]
  [../]
  [./bounds_dummy]
  [../]
[]

[Bounds]
  [./irreversibility]
    type = Irreversibility
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    upper = 1
    lower = &#x27;d_ref&#x27;
  [../]
[]

[Kernels]
  [./react]
    type = PhaseFieldFractureEvolutionReaction
    variable = &#x27;d&#x27;
    driving_energy_var = &#x27;E_el&#x27;
  [../]
  [./diff]
    type = PhaseFieldFractureEvolutionDiffusion
    variable = &#x27;d&#x27;
  [../]
[]

[Materials]
  [./fracture_energy_barrier]
    type = GenericFunctionMaterial
    prop_names = &#x27;energy_release_rate phase_field_regularization_length critical_fracture_energy&#x27;
    prop_values = &#x27;${Gc} ${l} ${psic}&#x27;
  [../]
  [./local_dissipation]
    type = LinearLocalDissipation
    d = d
  [../]
  [./fracture_properties]
    type = FractureMaterial
    local_dissipation_norm = 8/3
  [../]
  [./degradation]
    type = LorentzDegradation
    d = d
    residual_degradation = ${k}
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options_iname = &#x27;-pc_type -snes_type&#x27;
  petsc_options_value = &#x27;lu vinewtonrsls&#x27;
  dt = 1e-6

  nl_abs_tol = 1e-08
  nl_rel_tol = 1e-06
[]

[Outputs]
  print_linear_residuals = false
  [./console]
    type = Console
    hide = &#x27;load&#x27;
    outlier_variable_norms = false
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><p>A variational inequality solver <strong>must</strong> be used for the bound to be effective. For example, here we use the <code>vinewtonrsls</code> nonlinear solver to enforce irreversibility:</p><pre class="moose-pre"><code class="language-text">  petsc_options_iname = &#x27;-pc_type -snes_type&#x27;
  petsc_options_value = &#x27;lu vinewtonrsls&#x27;
</code></pre><a href="#dc20b3bf-09ee-41ab-9a2e-ae42c50b4eb0" class="modal-trigger">(benchmarks/mode1_geometric_notch/fracture.i)</a><div class="modal moose-modal" id="dc20b3bf-09ee-41ab-9a2e-ae42c50b4eb0"><div class="modal-content"><h4>/home/gary/projects/raccoon/benchmarks/mode1_geometric_notch/fracture.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = FileMesh
  file = &#x27;gold/geo.msh&#x27;
[]

[Variables]
  [./d]
  [../]
[]

[AuxVariables]
  [./load]
    family = SCALAR
  [../]
  [./E_el]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./d_ref]
  [../]
  [./bounds_dummy]
  [../]
[]

[Bounds]
  [./irreversibility]
    type = Irreversibility
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    upper = 1
    lower = &#x27;d_ref&#x27;
  [../]
[]

[Kernels]
  [./react]
    type = PhaseFieldFractureEvolutionReaction
    variable = &#x27;d&#x27;
    driving_energy_var = &#x27;E_el&#x27;
  [../]
  [./diff]
    type = PhaseFieldFractureEvolutionDiffusion
    variable = &#x27;d&#x27;
  [../]
[]

[Materials]
  [./fracture_energy_barrier]
    type = GenericFunctionMaterial
    prop_names = &#x27;energy_release_rate phase_field_regularization_length critical_fracture_energy&#x27;
    prop_values = &#x27;${Gc} ${l} ${psic}&#x27;
  [../]
  [./local_dissipation]
    type = LinearLocalDissipation
    d = d
  [../]
  [./fracture_properties]
    type = FractureMaterial
    local_dissipation_norm = 8/3
  [../]
  [./degradation]
    type = LorentzDegradation
    d = d
    residual_degradation = ${k}
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options_iname = &#x27;-pc_type -snes_type&#x27;
  petsc_options_value = &#x27;lu vinewtonrsls&#x27;
  dt = 1e-6

  nl_abs_tol = 1e-08
  nl_rel_tol = 1e-06
[]

[Outputs]
  print_linear_residuals = false
  [./console]
    type = Console
    hide = &#x27;load&#x27;
    outlier_variable_norms = false
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></section><section class="scrollspy" id="6c60b7cb-9235-4f94-8374-c57c269fcad5" data-section-level="2" data-section-text="Defining initial damage"><h2 id="defining-initial-damage">Defining initial damage</h2><p>Instead of a &quot;meshed-in&quot; initial crack, sometimes we may need initial imperfections in the form of an initial damage field. To do so, simply define the initial damage field in the master input file, e.g.</p><pre class="moose-pre"><code class="language-text">[ICs]
  [./d]
    type = CohesiveDamageIC
    variable = d
    d0 = 1.0
    l = ${l}
    x1 = -0.5
    y1 = 0
    z1 = 0
    x2 = 0
    y2 = 0
    z2 = 0
  [../]
[]
</code></pre><a href="#e529a14f-3c00-48f5-a4d3-7c3dc8b25543" class="modal-trigger">(benchmarks/mode1_initial_damage/master.i)</a><div class="modal moose-modal" id="e529a14f-3c00-48f5-a4d3-7c3dc8b25543"><div class="modal-content"><h4>/home/gary/projects/raccoon/benchmarks/mode1_initial_damage/master.i</h4><pre class="moose-pre"><code class="language-text">E = 2.1e5
nu = 0.3
Gc = 2.7
l = 0.015
psic = 14.88
k = 1e-09
dc = 0.6

[Problem]
  solve = false
[]

[Mesh]
  type = FileMesh
  file = &#x27;gold/geo.msh&#x27;
[]

[MultiApps]
  [./mechanical]
    type = TransientMultiApp
    input_files = &#x27;mechanical.i&#x27;
    app_type = raccoonApp
    execute_on = &#x27;TIMESTEP_BEGIN&#x27;
    sub_cycling = true
    detect_steady_state = true
    steady_state_tol = 1e-6
    cli_args = &#x27;E=${E};nu=${nu};Gc=${Gc};l=${l};psic=${psic};k=${k};dc=${dc}&#x27;
  [../]
[]

[Transfers]
  [./send_load]
    type = MultiAppScalarToAuxScalarTransfer
    multi_app = mechanical
    direction = to_multiapp
    source_variable = &#x27;load&#x27;
    to_aux_scalar = &#x27;load&#x27;
  [../]
  [./get_d_ref]
    type = MultiAppCopyTransfer
    multi_app = mechanical
    direction = from_multiapp
    source_variable = &#x27;d&#x27;
    variable = &#x27;d&#x27;
    execute_on = &#x27;TIMESTEP_END&#x27;
  [../]
  [./send_d_ref]
    type = MultiAppCopyTransfer
    multi_app = mechanical
    direction = to_multiapp
    source_variable = &#x27;d&#x27;
    variable = &#x27;d_ref&#x27;
    execute_on = &#x27;TIMESTEP_BEGIN&#x27;
  [../]
[]

[AuxVariables]
  [./load]
    family = SCALAR
  [../]
  [./d]
  [../]
[]

[ICs]
  [./d]
    type = CohesiveDamageIC
    variable = d
    d0 = 1.0
    l = ${l}
    x1 = -0.5
    y1 = 0
    z1 = 0
    x2 = 0
    y2 = 0
    z2 = 0
  [../]
[]

[AuxScalarKernels]
  [./load]
    type = FunctionScalarAux
    variable = &#x27;load&#x27;
    function = &#x27;t&#x27;
    execute_on = &#x27;INITIAL TIMESTEP_BEGIN&#x27;
  [../]
[]

[Executioner]
  type = Transient
  dt = 1e-4
  end_time = 6e-3
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><p><a href="../source/ics/CohesiveDamageIC.html">CohesiveDamageIC</a> and <a href="../source/ics/BrittleDamageIC.html">BrittleDamageIC</a> are predefined initial conditions based on closed-form solutions.</p></section><section class="scrollspy" id="1647e9a2-e44c-4316-b61a-fcc1cc61dde9" data-section-level="2" data-section-text="Fixed - point iteration : the other way"><h2 id="fixed-point-iteration-the-other-way">Fixed-point iteration: the other way</h2><p>Recently, another way to perform fixed-point iteration has made its way into RACCOON. As opposed to the old way, the new system needs only one input file. Between fixed-point iterations within one load step, stateful material properties are advanced. Therefore, by &quot;lagging&quot; the fracture driving energy one step, we achieve effectively fixed-point iteration.</p><pre class="moose-pre"><code class="language-text">[Problem]
  type = FixedPointProblem
[]

[Mesh]
  type = FileMesh
  file = &#x27;gold/geo.msh&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./d]
  [../]
[]

[AuxVariables]
  [./bounds_dummy]
  [../]
  [./fy]
  [../]
[]

[Bounds]
  [./irreversibility]
    type = Irreversibility
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    upper = 1
    lower = &#x27;d&#x27;
    lag = true
  [../]
[]

[Kernels]
  [./solid_x]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_x&#x27;
    component = 0
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./solid_y]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_y&#x27;
    component = 1
    displacements = &#x27;disp_x disp_y&#x27;
    save_in = &#x27;fy&#x27;
  [../]
  [./pff_diff]
    type = PhaseFieldFractureEvolutionDiffusion
    variable = &#x27;d&#x27;
  [../]
  [./pff_react]
    type = PhaseFieldFractureEvolutionReaction
    variable = &#x27;d&#x27;
    driving_energy_name = &#x27;E_el&#x27;
    lag = true
  [../]
[]

[BCs]
  [./ydisp]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;top&#x27;
    function = &#x27;t&#x27;
  [../]
  [./xfix]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;top bottom&#x27;
    value = 0
  [../]
  [./yfix]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;bottom&#x27;
    value = 0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 2.1e5
    poissons_ratio = 0.3
  [../]
  [./strain]
    type = ADComputeSmallStrain
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./stress]
    type = SmallStrainDegradedPK2Stress_StrainSpectral
    d = d
    d_crit = 2.0
    history = false
  [../]
  [./bulk]
    type = GenericConstantMaterial
    prop_names = &#x27;phase_field_regularization_length energy_release_rate critical_fracture_energy&#x27;
    prop_values = &#x27;0.015 2.7 14.88&#x27;
  [../]
  [./local_dissipation]
    type = LinearLocalDissipation
    d = d
  [../]
  [./fracture_properties]
    type = FractureMaterial
    local_dissipation_norm = 8/3
  [../]
  [./degradation]
    type = LorentzDegradation
    d = d
    residual_degradation = 1e-09
  [../]
[]

[Postprocessors]
  [./Fy]
    type = NodalSum
    variable = &#x27;fy&#x27;
    boundary = &#x27;top&#x27;
  [../]
[]

[Executioner]
  type = FixedPointTransient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options_iname = &#x27;-pc_type -sub_pc_type -ksp_max_it -ksp_gmres_restart -sub_pc_factor_levels -snes_type&#x27;
  petsc_options_value = &#x27;asm      ilu          1000        200                0                     vinewtonrsls&#x27;
  dt = 1e-4
  end_time = 6e-3

  nl_abs_tol = 1e-08
  nl_rel_tol = 1e-06

  automatic_scaling = true
  compute_scaling_once = false

  fp_max_its = 100
  fp_tol = 1e-06
  accept_on_max_fp_iteration = true
[]

[Outputs]
  print_linear_residuals = false
  [./csv]
    type = CSV
    delimiter = &#x27; &#x27;
    file_base = &#x27;force_displacement&#x27;
  [../]
  [./exodus]
    type = Exodus
    file_base = &#x27;visualize&#x27;
    hide = &#x27;bounds_dummy&#x27;
  [../]
  [./console]
    type = Console
    outlier_variable_norms = false
  [../]
[]
</code></pre><a href="#de86a1ba-f558-48ee-911f-bd7494681166" class="modal-trigger">(benchmarks/fixed_point_iteration/mechanical_fracture.i)</a><div class="modal moose-modal" id="de86a1ba-f558-48ee-911f-bd7494681166"><div class="modal-content"><h4>/home/gary/projects/raccoon/benchmarks/fixed_point_iteration/mechanical_fracture.i</h4><pre class="moose-pre"><code class="language-text">[Problem]
  type = FixedPointProblem
[]

[Mesh]
  type = FileMesh
  file = &#x27;gold/geo.msh&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./d]
  [../]
[]

[AuxVariables]
  [./bounds_dummy]
  [../]
  [./fy]
  [../]
[]

[Bounds]
  [./irreversibility]
    type = Irreversibility
    variable = &#x27;bounds_dummy&#x27;
    bounded_variable = &#x27;d&#x27;
    upper = 1
    lower = &#x27;d&#x27;
    lag = true
  [../]
[]

[Kernels]
  [./solid_x]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_x&#x27;
    component = 0
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./solid_y]
    type = ADStressDivergenceTensors
    variable = &#x27;disp_y&#x27;
    component = 1
    displacements = &#x27;disp_x disp_y&#x27;
    save_in = &#x27;fy&#x27;
  [../]
  [./pff_diff]
    type = PhaseFieldFractureEvolutionDiffusion
    variable = &#x27;d&#x27;
  [../]
  [./pff_react]
    type = PhaseFieldFractureEvolutionReaction
    variable = &#x27;d&#x27;
    driving_energy_name = &#x27;E_el&#x27;
    lag = true
  [../]
[]

[BCs]
  [./ydisp]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;top&#x27;
    function = &#x27;t&#x27;
  [../]
  [./xfix]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;top bottom&#x27;
    value = 0
  [../]
  [./yfix]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;bottom&#x27;
    value = 0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 2.1e5
    poissons_ratio = 0.3
  [../]
  [./strain]
    type = ADComputeSmallStrain
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./stress]
    type = SmallStrainDegradedPK2Stress_StrainSpectral
    d = d
    d_crit = 2.0
    history = false
  [../]
  [./bulk]
    type = GenericConstantMaterial
    prop_names = &#x27;phase_field_regularization_length energy_release_rate critical_fracture_energy&#x27;
    prop_values = &#x27;0.015 2.7 14.88&#x27;
  [../]
  [./local_dissipation]
    type = LinearLocalDissipation
    d = d
  [../]
  [./fracture_properties]
    type = FractureMaterial
    local_dissipation_norm = 8/3
  [../]
  [./degradation]
    type = LorentzDegradation
    d = d
    residual_degradation = 1e-09
  [../]
[]

[Postprocessors]
  [./Fy]
    type = NodalSum
    variable = &#x27;fy&#x27;
    boundary = &#x27;top&#x27;
  [../]
[]

[Executioner]
  type = FixedPointTransient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options_iname = &#x27;-pc_type -sub_pc_type -ksp_max_it -ksp_gmres_restart -sub_pc_factor_levels -snes_type&#x27;
  petsc_options_value = &#x27;asm      ilu          1000        200                0                     vinewtonrsls&#x27;
  dt = 1e-4
  end_time = 6e-3

  nl_abs_tol = 1e-08
  nl_rel_tol = 1e-06

  automatic_scaling = true
  compute_scaling_once = false

  fp_max_its = 100
  fp_tol = 1e-06
  accept_on_max_fp_iteration = true
[]

[Outputs]
  print_linear_residuals = false
  [./csv]
    type = CSV
    delimiter = &#x27; &#x27;
    file_base = &#x27;force_displacement&#x27;
  [../]
  [./exodus]
    type = Exodus
    file_base = &#x27;visualize&#x27;
    hide = &#x27;bounds_dummy&#x27;
  [../]
  [./console]
    type = Console
    outlier_variable_norms = false
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></section><section class="scrollspy" id="4a838ba1-defb-475e-bdde-9e19a5572782" data-section-level="2" data-section-text="Visualizing the outputs"><h2 id="visualizing-the-outputs">Visualizing the outputs</h2><p>The following animations are generated using Paraview.</p><img src="../media/mode1.gif" class="materialboxed moose-image" style="width:60%;margin:auto;padding-top:2.5%;"></img></section></section></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a href="#0e35d613-86db-419e-aba2-31613293d84f" class="tooltipped" data-position="left" data-tooltip="Load control">Load control</a></li><li><a href="#8146b84b-018f-4be0-9f45-62f1d9723bc4" class="tooltipped" data-position="left" data-tooltip="The elasticity subproblem">The elasticity subproblem</a></li><li><a href="#23c4d0d2-a7f4-44f1-bce2-e86e9be3aa49" class="tooltipped" data-position="left" data-tooltip="The fracture subproblem">The fracture subproblem</a></li><li><a href="#6c60b7cb-9235-4f94-8374-c57c269fcad5" class="tooltipped" data-position="left" data-tooltip="Defining initial damage">Defining initial damage</a></li><li><a href="#1647e9a2-e44c-4316-b61a-fcc1cc61dde9" class="tooltipped" data-position="left" data-tooltip="Fixed - point iteration : the other way">Fixed - point iteration : the other way</a></li><li><a href="#4a838ba1-defb-475e-bdde-9e19a5572782" class="tooltipped" data-position="left" data-tooltip="Visualizing the outputs">Visualizing the outputs</a></li></ul></div></div></div></div></main></div></body><script type="text/javascript" src="../contrib/jquery/jquery.min.js"></script><script type="text/javascript" src="../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../js/init.js"></script><script type="text/javascript" src="../js/navigation.js"></script><script type="text/javascript" src="../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../js/search_index.js"></script>