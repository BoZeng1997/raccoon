<!DOCTYPE html><head><meta charset="UTF-8"><link rel="icon" type="image/x-icon" href="../../media/raccoon_icon.png" sizes="16x16 32x32 64x64 128x128"></link><link href="../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../contrib/katex/katex.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/katex_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../contrib/katex/katex.min.js"></script><script type="text/javascript" src="../../contrib/plotly/plotly.min.js"></script><title>Mesh System|RACCOON</title></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="https://hugary1995.github.io/raccoon/index.html" class="left moose-logo hide-on-med-and-down">RACCOON</a><a href="https://github.com/hugary1995/raccoon" class="right"><img src="../../media/framework/github-logo.png" class="github-mark"></img><img src="../../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"><li><a href="../../install/index.html">Install</a></li><li class="moose-mega-menu-trigger" data-target="42f1c529-d410-4b23-9384-e2cb4455715c"><a>Benchmarks<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../../theory/index.html">Theory</a></li><li><a href="../../modules/index.html">Modules</a></li><li><a href="../index.html">Syntax</a></li></ul><a href="#" class="sidenav-trigger" data-target="46ef63ef-dbf0-4ae7-872c-46cb0c2a11c1"><i class="material-icons">menu</i></a><ul class="sidenav" id="46ef63ef-dbf0-4ae7-872c-46cb0c2a11c1"><li><a href="../../install/index.html">Install</a></li><li><a href="../../benchmarks.menu.html">Benchmarks</a></li><li><a href="../../theory/index.html">Theory</a></li><li><a href="../../modules/index.html">Modules</a></li><li><a href="../index.html">Syntax</a></li></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div></nav><div class="moose-mega-menu-content" id="42f1c529-d410-4b23-9384-e2cb4455715c"><div class="moose-mega-menu-wrapper"><div class="row row"><div class="col s12 m6 l4"><h2 id="mode-i-crack-propagation"><a href="../../benchmarks/mode1.html">Mode I crack propagation <i class="material-icons moose-inline-icon">link</i></a></h2><img src="../../media/mode1.gif" class="materialboxed moose-image" style="width:75%;float:left;padding-top:2.5%;"></img><p></p></div><div class="col s12 m6 l4"><h2 id="mode-ii-crack-propagation"><a href="../../benchmarks/mode2.html">Mode II crack propagation <i class="material-icons moose-inline-icon">link</i></a></h2><img src="../../media/mode2.gif" class="materialboxed moose-image" style="width:75%;float:left;padding-top:2.5%;"></img><p></p></div><div class="col s12 m6 l4"><h2 id="soil-desiccation"><a href="../../benchmarks/mud.html">Soil desiccation <i class="material-icons moose-inline-icon">link</i></a></h2><img src="../../media/soil.gif" class="materialboxed moose-image" style="width:75%;float:left;padding-top:2.5%;"></img><p></p></div></div></div></div><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="https://hugary1995.github.io/raccoon/index.html" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><a href=".." class="breadcrumb">syntax</a><a href="." class="breadcrumb">Mesh</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section id="048dd546-a1d7-4cde-b217-5f5eec3015e7" data-section-level="1" data-section-text="Mesh System"><h1 id="mesh-system">Mesh System</h1><section class="scrollspy" id="03a0669c-6aae-49d6-ba2b-4c1884bac6c7" data-section-level="2" data-section-text="Overview"><h2 id="overview">Overview</h2><p>There are two primary ways of creating a mesh for use in a MOOSE simulation: &quot;offline generation&quot; through a tool like <a href="https://cubit.sandia.gov/">CUBIT</a> from <a href="http://www.sandia.gov/">Sandia National Laboratories</a>, and &quot;online generation&quot; through programmatic interfaces. CUBIT is useful for creating complex geometries, and can be licensed from CSimSoft for a fee depending on the type of organization and work being performed. Other mesh generators can work as long as they output a file format that is supported by the <a href="../../source/mesh/FileMesh.html">FileMesh</a> object.</p></section><section class="scrollspy" id="3dbf78a9-e99c-4f05-b21d-02ebd3230de3" data-section-level="2" data-section-text="Example Syntax and Mesh Objects"><h2 id="example-syntax-and-mesh-objects">Example Syntax and Mesh Objects</h2><p>Mesh settings are applied with the <code>[Mesh]</code> of the input files, for example the basic input file syntax for reading a file from a mesh is shown below. For additional information on the other types of Mesh objects refer to the individual object pages listed below.</p><pre class="moose-pre"><code class="language-text">[Mesh]
  type = FileMesh
  file = square.e
[]
</code></pre><a href="#0819eb46-5723-42db-8264-af53f5a645da" class="modal-trigger">(../moose/test/tests/auxkernels/solution_aux/build.i)</a><div class="modal moose-modal" id="0819eb46-5723-42db-8264-af53f5a645da"><div class="modal-content"><h4>/home/gary/projects/moose/test/tests/auxkernels/solution_aux/build.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = FileMesh
  file = square.e
[]

[Variables]
  [./u]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]
  [./diff]
    type = Diffusion
    variable = u
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = 1
    value = 2
  [../]
  [./right]
    type = DirichletBC
    variable = u
    boundary = 2
    value = 3
  [../]
[]

[Executioner]
  type = Steady
  solve_type = &#x27;PJFNK&#x27;
  nl_rel_tol = 1e-10
[]

[Outputs]
  exodus = true
  xda = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></section><section class="scrollspy" id="b57f5c4f-0c0f-4b0c-938c-3d2f1d9650ca" data-section-level="2" data-section-text="Available Objects"><h2 id="available-objects">Available Objects</h2><ul class="moose-syntax-list collection with-header"><li class="collection-header">Moose App</li><li class="collection-item"><a href="../../source/meshgenerators/AllSideSetsByNormalsGenerator.html">AllSideSetsByNormalsGenerator</a></li><li class="collection-item"><a href="../../source/meshgenerators/AnnularMeshGenerator.html">AnnularMeshGenerator</a>For rmin&gt;0: creates an annular mesh of QUAD4 elements.  For rmin=0: creates a disc mesh of QUAD4 and TRI3 elements.  Boundary sidesets are created at rmax and rmin, and given these names.  If dmin!<u>0 and dmax!</u>360, a sector of an annulus or disc is created.  In this case boundary sidesets are also created a dmin and dmax, and given these names</li><li class="collection-item"><a href="../../source/meshgenerators/BlockDeletionGenerator.html">BlockDeletionGenerator</a>Mesh modifier which removes elements with the specified subdomain ID</li><li class="collection-item"><a href="../../source/meshgenerators/BoundingBoxNodeSetGenerator.html">BoundingBoxNodeSetGenerator</a>Assigns all of the nodes either inside or outside of a bounding box to a new nodeset.</li><li class="collection-item"><a href="../../source/meshgenerators/BreakBoundaryOnSubdomainGenerator.html">BreakBoundaryOnSubdomainGenerator</a>Break boundaries based on the subdomains to which their sides are attached. Naming convention for the new boundaries will be the old boundary name plus &quot;_to_&quot; plus the subdomain name</li><li class="collection-item"><a href="../../source/meshgenerators/BreakMeshByBlockGenerator.html">BreakMeshByBlockGenerator</a>Break boundaries based on the subdomains to which their sides are attached. Naming convention for the new boundaries will be the old boundary name plus &quot;_to_&quot; plus the subdomain name. At the momentthis only works on REPLICATED mesh</li><li class="collection-item"><a href="../../source/meshgenerators/CartesianMeshGenerator.html">CartesianMeshGenerator</a>This CartesianMeshGenerator creates a non-uniform Cartesian mesh.</li><li class="collection-item"><a href="../../source/meshgenerators/CombinerGenerator.html">CombinerGenerator</a>Combine multiple meshes (or copies of one mesh) together into one (disjoint) mesh.  Can optionally translate those meshes before combining them.</li><li class="collection-item"><a href="../../source/meshgenerators/ConcentricCircleMeshGenerator.html">ConcentricCircleMeshGenerator</a>This ConcentricCircleMeshGenerator source code is to generate concentric circle meshes.</li><li class="collection-item"><a href="../../source/meshgenerators/ElementGenerator.html">ElementGenerator</a></li><li class="collection-item"><a href="../../source/meshgenerators/ElementSubdomainIDGenerator.html">ElementSubdomainIDGenerator</a></li><li class="collection-item"><a href="../../source/meshgenerators/ExtraNodesetGenerator.html">ExtraNodesetGenerator</a></li><li class="collection-item"><a href="../../source/meshgenerators/FancyExtruderGenerator.html">FancyExtruderGenerator</a>Extrudes a 2D mesh into 3D, can have variable a variable height for each elevation, variable number of layers within each elevation and remap subdomain_ids within each elevation</li><li class="collection-item"><a href="../../source/meshgenerators/FileMeshGenerator.html">FileMeshGenerator</a></li><li class="collection-item"><a href="../../source/meshgenerators/GeneratedMeshGenerator.html">GeneratedMeshGenerator</a>Create a line, square, or cube mesh with uniformly spaced or biased elements.</li><li class="collection-item"><a href="../../source/meshgenerators/ImageMeshGenerator.html">ImageMeshGenerator</a>Generated mesh with the aspect ratio of a given image stack.</li><li class="collection-item"><a href="../../source/meshgenerators/ImageSubdomainGenerator.html">ImageSubdomainGenerator</a>Samples an image at the coordinates of each element centroid using the resulting value as each element&#x27;s subdomain ID</li><li class="collection-item"><a href="../../source/meshgenerators/LowerDBlockFromSidesetGenerator.html">LowerDBlockFromSidesetGenerator</a>Adds lower dimensional elements on the specified sidesets.</li><li class="collection-item"><a href="../../source/meshgenerators/MeshCollectionGenerator.html">MeshCollectionGenerator</a>Collects multiple meshes into a single (unconnected) mesh.</li><li class="collection-item"><a href="../../source/meshgenerators/MeshExtruderGenerator.html">MeshExtruderGenerator</a>Takes a 1D or 2D mesh and extrudes the entire structure along the specified axis increasing the dimensionality of the mesh.</li><li class="collection-item"><a href="../../source/meshgenerators/MeshSideSetGenerator.html">MeshSideSetGenerator</a>Add lower dimensional elements along the faces contained in a side set to set up mixed dimensional problems</li><li class="collection-item"><a href="../../source/meshgenerators/OrientedSubdomainBoundingBoxGenerator.html">OrientedSubdomainBoundingBoxGenerator</a></li><li class="collection-item"><a href="../../source/meshgenerators/ParsedGenerateSideset.html">ParsedGenerateSideset</a>A MeshModifier that adds element&#x27;s sides to a sideset if the centroid satisfies the combinatorial_geometry expression, (and optionally) if one of the side&#x27;s elements is in included_subdomain_ids and if it features the correct normal.</li><li class="collection-item"><a href="../../source/meshgenerators/ParsedSubdomainMeshGenerator.html">ParsedSubdomainMeshGenerator</a>MeshModifier that uses a parsed expression (combinatorial_geometry) to determine if an element (aka its centroid) is inside the combinatorial geometry and assigns a new block id.</li><li class="collection-item"><a href="../../source/meshgenerators/PatchMeshGenerator.html">PatchMeshGenerator</a></li><li class="collection-item"><a href="../../source/meshgenerators/PatternedMeshGenerator.html">PatternedMeshGenerator</a>Creates a 2D mesh from a specified set of unique &#x27;tiles&#x27; meshes and a two-dimensional pattern.</li><li class="collection-item"><a href="../../source/meshgenerators/PlaneDeletionGenerator.html">PlaneDeletionGenerator</a>Removes elements lying &#x27;above&#x27; the plane (in the direction of the normal).</li><li class="collection-item"><a href="../../source/meshgenerators/RenameBlockGenerator.html">RenameBlockGenerator</a>RenameBlock re-numbers or re-names an old_block_id or old_block_name with a new_block_id or new_block_name.  If using RenameBlock to merge blocks (by giving them the same name, for instance) it is advisable to specify all your blocks in old_blocks to avoid inconsistencies</li><li class="collection-item"><a href="../../source/meshgenerators/RenameBoundaryGenerator.html">RenameBoundaryGenerator</a>RenameBoundaryGenerator re-numbers or re-names an old_boundary_id or old_boundary_name with a new_boundary_id or new_boundary_name.  If using RenameBoundaryGenerator to merge boundaries (by giving them the same name, for instance) it is advisable to specify all your boundaries in old_boundaries to avoid inconsistencies</li><li class="collection-item"><a href="../../source/meshgenerators/RinglebMeshGenerator.html">RinglebMeshGenerator</a>Creates a mesh for the Ringleb problem.</li><li class="collection-item"><a href="../../source/meshgenerators/SideSetsAroundSubdomainGenerator.html">SideSetsAroundSubdomainGenerator</a>Adds element faces that are on the exterior of the given block to the sidesets specified</li><li class="collection-item"><a href="../../source/meshgenerators/SideSetsBetweenSubdomainsGenerator.html">SideSetsBetweenSubdomainsGenerator</a></li><li class="collection-item"><a href="../../source/meshgenerators/SideSetsFromBoundingBoxGenerator.html">SideSetsFromBoundingBoxGenerator</a>Find sidesets with given boundary ids in bounding box and add new boundary id. This can be done by finding all required boundary and adding the new boundary id to those sidesets. Alternatively, a number of boundary ids can be provided and all nodes within the bounding box that have all the required boundary ids will have a newboundary id added.</li><li class="collection-item"><a href="../../source/meshgenerators/SideSetsFromNormalsGenerator.html">SideSetsFromNormalsGenerator</a>Adds a new named sideset to the mesh for all faces matching the specified normal.</li><li class="collection-item"><a href="../../source/meshgenerators/SideSetsFromPointsGenerator.html">SideSetsFromPointsGenerator</a>Adds a new sideset starting at the specified point containing all connected element faces with the same normal.</li><li class="collection-item"><a href="../../source/meshgenerators/SmoothMeshGenerator.html">SmoothMeshGenerator</a>Utilizes a simple Laplacian based smoother to attempt to improve mesh quality.  Will not move boundary nodes or nodes along block/subdomain boundaries</li><li class="collection-item"><a href="../../source/meshgenerators/SpiralAnnularMeshGenerator.html">SpiralAnnularMeshGenerator</a>Creates an annual mesh based on TRI3 elements (it can also be TRI6 elements) on several rings.</li><li class="collection-item"><a href="../../source/meshgenerators/StackGenerator.html">StackGenerator</a>Use the supplied meshes and stitch them on top of each other</li><li class="collection-item"><a href="../../source/meshgenerators/StitchedMeshGenerator.html">StitchedMeshGenerator</a></li><li class="collection-item"><a href="../../source/meshgenerators/SubdomainBoundingBoxGenerator.html">SubdomainBoundingBoxGenerator</a>Changes the subdomain ID of elements either (XOR) inside or outside the specified box to the specified ID.</li><li class="collection-item"><a href="../../source/meshgenerators/SubdomainIDGenerator.html">SubdomainIDGenerator</a></li><li class="collection-item"><a href="../../source/meshgenerators/TiledMeshGenerator.html">TiledMeshGenerator</a>Use the supplied mesh and create a tiled grid by repeating this mesh in the x,y, and z directions.</li><li class="collection-item"><a href="../../source/meshgenerators/TransformGenerator.html">TransformGenerator</a>Applies a linear transform to the entire mesh.</li><li class="collection-item"><a href="../../source/mesh/AnnularMesh.html">AnnularMesh</a>For rmin&gt;0: creates an annular mesh of QUAD4 elements.  For rmin=0: creates a disc mesh of QUAD4 and TRI3 elements.  Boundary sidesets are created at rmax and rmin, and given these names.  If dmin!<u>0 and dmax!</u>360, a sector of an annulus or disc is created.  In this case boundary sidesets are also created a dmin and dmax, and given these names</li><li class="collection-item"><a href="../../source/mesh/ConcentricCircleMesh.html">ConcentricCircleMesh</a>This ConcentricCircleMesh source code is to generate concentric circle meshes.</li><li class="collection-item"><a href="../../source/mesh/DistributedGeneratedMesh.html">DistributedGeneratedMesh</a>Create a line, square, or cube mesh with uniformly spaced or biased elements.</li><li class="collection-item"><a href="../../source/mesh/FileMesh.html">FileMesh</a>Read a mesh from a file.</li><li class="collection-item"><a href="../../source/mesh/GeneratedMesh.html">GeneratedMesh</a>Create a line, square, or cube mesh with uniformly spaced or biased elements.</li><li class="collection-item"><a href="../../source/mesh/ImageMesh.html">ImageMesh</a>Generated mesh with the aspect ratio of a given image stack.</li><li class="collection-item"><a href="../../source/mesh/MeshGeneratorMesh.html">MeshGeneratorMesh</a></li><li class="collection-item"><a href="../../source/mesh/PatternedMesh.html">PatternedMesh</a>Creates a 2D mesh from a specified set of unique &#x27;tiles&#x27; meshes and a two-dimensional pattern.</li><li class="collection-item"><a href="../../source/mesh/RinglebMesh.html">RinglebMesh</a>Creates a mesh for the Ringleb problem.</li><li class="collection-item"><a href="../../source/mesh/SpiralAnnularMesh.html">SpiralAnnularMesh</a>Creates an annual mesh based on TRI3 elements (it can also be TRI6 elements) on several rings.</li><li class="collection-item"><a href="../../source/mesh/StitchedMesh.html">StitchedMesh</a>Reads in all of the given meshes and stitches them all together into one mesh.</li><li class="collection-item"><a href="../../source/mesh/TiledMesh.html">TiledMesh</a>Use the supplied mesh and create a tiled grid by repeating this mesh in the x,y, and z directions.</li><li class="collection-header">Heat Conduction App</li><li class="collection-item"><a href="../../source/meshgenerators/PatchSidesetGenerator.html">PatchSidesetGenerator</a>Divides the given sideset into smaller patches of roughly equal size.</li><li class="collection-header">Phase Field App</li><li class="collection-item"><a href="../../source/meshgenerators/SphereSurfaceMeshGenerator.html">SphereSurfaceMeshGenerator</a>Generated sphere mesh - a two dimensional manifold embedded in three dimensional space</li><li class="collection-item"><a href="../../source/mesh/EBSDMesh.html">EBSDMesh</a>Mesh generated from a specified DREAM.3D EBSD data file.</li></ul></section><section class="scrollspy" id="0a2027bd-5304-4779-b3b8-073825df3c74" data-section-level="2" data-section-text="Available Subsystems"><h2 id="available-subsystems">Available Subsystems</h2><ul class="moose-syntax-list collection with-header"><li class="collection-header">Moose App</li><li class="collection-item"><a href="Partitioner/index.html">Partitioner</a></li></ul></section><section class="scrollspy" id="6417115d-c1ea-4835-9be9-46f85d5f5361" data-section-level="2" data-section-text="Available Actions"><h2 id="available-actions">Available Actions</h2><ul class="moose-syntax-list collection with-header"><li class="collection-header">Moose App</li><li class="collection-item"><a href="../../source/actions/CreateDisplacedProblemAction.html">CreateDisplacedProblemAction</a></li><li class="collection-item"><a href="../../source/actions/DisplayGhostingAction.html">DisplayGhostingAction</a>Action to setup AuxVariables and AuxKernels to display ghosting when running in parallel</li><li class="collection-item"><a href="../../source/actions/SetupMeshAction.html">SetupMeshAction</a></li><li class="collection-item"><a href="../../source/actions/SetupMeshCompleteAction.html">SetupMeshCompleteAction</a></li><li class="collection-item"><a href="../../source/actions/AddMeshGeneratorAction.html">AddMeshGeneratorAction</a></li></ul></section><section class="scrollspy" id="103885dd-5382-4ff6-b618-893c15b8f6f3" data-section-level="2" data-section-text="MeshGenerator System"><h2 id="meshgenerator-system">MeshGenerator System</h2><p>The MeshGenerator System is useful for programmatically constructing a mesh. This includes generating the mesh from a serious of points and connectivity, adding features on the fly, linearly transforming the mesh, stitching together pieces of meshes, etc. There are several built-in generators but this system is also extendable. MeshGenerators may or may not consumer the output from other generators and produce a single mesh. They can be chained together through dependencies so that complex meshes may be built up from a series of simple processes.</p><section id="6ccacc8f-d136-4847-a788-1ea8e47dc462" data-section-level="3" data-section-text="DAG and final mesh selection"><h3 id="dag-and-final-mesh-selection">DAG and final mesh selection</h3><p>When chaining together several MeshGenerators, you are implicitly creating a DAG (directed acyclic graph). MOOSE evaluates and generates the individual objects to build up your final mesh. If your input file has multiple end points, (e.g. B-&gt;A and C-&gt;A) then MOOSE will issue an error and terminate. Generally, it doesn&#x27;t make sense to have multiple end points since the output of one would simply be discarded anyway. It is possible to force the selection of a particular end point by using the &quot;final_generator&quot; parameter in the Mesh block. This parameter can be used on any generator whether there is ambiguity or not in the generator dependencies.</p></section></section><section class="scrollspy" id="a167a2b8-5ede-4185-b1da-6bceefcf25a7" data-section-level="2" data-section-text="Outputting The Mesh"><h2 id="outputting-the-mesh">Outputting The Mesh</h2><p>Since MOOSE contains a lot of ability to read/generate/modify meshes - it&#x27;s often useful to be able to run all of the Mesh related portions of the input file and then output the mesh.  This mesh can then be viewed (such as with Peacock) or used in other MOOSE input files for further combination/modification.</p><p>This can be achieved by using the commandline option <code>--mesh-only</code>.  By default <code>--mesh-only</code> will write a mesh file with <code>_in.e</code> (the opposite of the <code>_out.e</code> that is appended from the output system) appended to the input file name.  You can also optionally provide a mesh filename to writeout using <code>--mesh-only output_file.e</code>.</p><p>Here are a couple of examples showing the usage of <code>--mesh-only</code>:</p><pre class="moose-pre"><code class="language-text">
# Will run all mesh related sections in input_file.i and write out input_file_in.e
./myapp-opt -i input_file.i --mesh-only

# Will do the same but write out mesh_file.e
./myapp-opt -i input_file.i --mesh-only mesh_file.e

# Run in parallel and write out parllel checkpoint format (which can be read as a split)
mpiexec -n 3 ./myapp-opt -i input_file.i Mesh/parallel_type=distributed --mesh-only mesh_file.cpr
</code></pre></section><section class="scrollspy" id="674dc5bc-fd8c-4b12-b247-b5a18255f572" data-section-level="2" data-section-text="Named Entity Support"><h2 id="named-entity-support">Named Entity Support</h2><p>Human-readable names can be assigned to blocks, sidesets, and nodesets. These names will be automatically read in and can be used throughout the input file. Mesh generators such as CUBIT will generally provide the capability internally.  Any parameter that takes entity IDs in the input file will accept either numbers or &quot;names&quot;. Names can also be assigned to IDs on-the-fly in existing meshes to ease input file maintenance (see example). On-the-fly names will also be written to Exodus/XDA/XDR files. An illustration for mesh in exodus file format.</p><pre class="moose-pre"><code class="language-text">[Mesh]
  file = three_block.e

  # These names will be applied on the fly to the
  # mesh so that they can be used in the input file
  # In addition they will show up in the output file
  block_id = &#x27;1 2 3&#x27;
  block_name = &#x27;wood steel copper&#x27;

  boundary_id = &#x27;1 2&#x27;
  boundary_name = &#x27;left right&#x27;
[]
</code></pre><a href="#519ff440-e33b-4319-b2d4-ca7497caae27" class="modal-trigger">(../moose/test/tests/mesh/named_entities/name_on_the_fly.i)</a><div class="modal moose-modal" id="519ff440-e33b-4319-b2d4-ca7497caae27"><div class="modal-content"><h4>/home/gary/projects/moose/test/tests/mesh/named_entities/name_on_the_fly.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  file = three_block.e

  # These names will be applied on the fly to the
  # mesh so that they can be used in the input file
  # In addition they will show up in the output file
  block_id = &#x27;1 2 3&#x27;
  block_name = &#x27;wood steel copper&#x27;

  boundary_id = &#x27;1 2&#x27;
  boundary_name = &#x27;left right&#x27;
[]

[Variables]
  active = &#x27;u&#x27;

  [./u]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]
  active = &#x27;diff&#x27;

  [./diff]
    type = Diffusion
    variable = u
  [../]
[]

[BCs]
  active = &#x27;left right&#x27;

  [./left]
    type = DirichletBC
    variable = u
    boundary = &#x27;left&#x27;
    value = 0
  [../]

  [./right]
    type = DirichletBC
    variable = u
    boundary = &#x27;right&#x27;
    value = 1
  [../]
[]

[Materials]
  active = empty

  [./empty]
    type = MTMaterial
    block = &#x27;wood steel copper&#x27;
  [../]
[]

[Executioner]
  type = Steady

  solve_type = &#x27;PJFNK&#x27;
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></section><section class="scrollspy" id="d3ee592f-8efd-431b-81c1-6e22670af491" data-section-level="2" data-section-text="Replicated and Distributed Mesh"><h2 id="replicated-and-distributed-mesh">Replicated and Distributed Mesh</h2><p>The core of the mesh capabilities are derived from <a href="http://libmesh.github.io/">libMesh</a>, which has two underlying parallel mesh formats: &quot;replicated&quot; and &quot;distributed&quot;.</p><p>The replicated mesh format is the default format for MOOSE and is the most appropriate format to utilize for nearly all simulations. In parallel, the replicated format copies the complete mesh to all processors allowing for efficient access to the geometry elements.</p><p>The distributed mesh format is useful when the mesh data structure dominates memory usage. Only the pieces of the mesh &quot;owned&quot; by a processor are actually stored on the processor. If the mesh is too large to read in on a single processor, it can be split prior to the simulation.</p><div class="card moose-alert moose-alert-note"><div class="card-title moose-alert-title"><span class="moose-alert-title-brand">note</span></div><div class="card-content"><div class="moose-alert-content"><p><p>Both the &quot;replicated&quot; and &quot;distributed&quot; mesh formats are parallel with respect to the execution of the finite element assembly and solve. In both types the solution data is distributed, which is the portion of the simulation that usually dominates memory demands.</p></p></div></div></div><section id="67c1952f-267f-4e92-ad1b-ef8012121014" data-section-level="3" data-section-text="Distributed Mesh Output Format ( Nemesis )"><h3 id="distributed-mesh-output-format-nemesis">Distributed Mesh Output Format (Nemesis)</h3><p>When running a simulation with <code>DistributedMesh</code> it is generally desirable to avoid serializing the mesh to the first rank for output. In the largest case this may cause your simulation to run out of memory, in smaller cases, it may just cause unecessary communication to serialize your parallel datastructure. The solution is to use &quot;nemesis&quot; output.</p><p>Nemesis creates separate Exodus files that are automatically read by paraview and displayed as if a normal Exodus mesh had been output. The output files have the following naming convention:</p><pre class="moose-pre"><code class="language-text">
&lt;filename&gt;.e.&lt;num_processors&gt;.&lt;rank&gt;

# For example, on a 4 processor run, you can expect filenames like this:
out.e.4.0
out.e.4.1
out.e.4.2
out.e.4.3
</code></pre></section></section><section class="scrollspy" id="a15981ce-b34c-4447-96bb-d21d3266e4cd" data-section-level="2" data-section-text="Mesh splitting"><h2 id="mesh-splitting">Mesh splitting</h2><p>For large meshes, MOOSE provides the ability to pre-split a mesh for use in the the &quot;distributed&quot; format/mode.  To split and use a mesh for distributed runs:</p><pre class="moose-pre"><code class="language-text">
// For input files with a file-based mesh:
$ moose-app-opt -i your_input-file.i --split-mesh 500,1000,2000 // comma-separated list of split configurations
Splitting 500 ways...
    - writing 500 files per process...
Splitting 1000 ways...
    - writing 1000 files per process...
...

// MOOSE automatically selects the pre-split mesh configuration based on MPI procs
$ mpiexec -n 1000 moose-app-opt -i your_input-file.i --use-split
</code></pre><p>For more details see &quot;<a href="splitting.html">Mesh Splitting</a>&quot;.</p></section><section class="scrollspy" id="a28265b1-4f59-415b-9444-5d34645262db" data-section-level="2" data-section-text="Displaced Mesh"><h2 id="displaced-mesh">Displaced Mesh</h2><p>Calculations can take place in either the initial mesh configuration or, when requested, the &quot;displaced&quot; configuration. To enable displacements, provide a vector of displacement variable names for each spatial dimension in the &#x27;displacements&#x27; parameters within the Mesh block.</p><pre class="moose-pre"><code class="language-text">[Mesh]
  type = FileMesh
  file = truss_2d.e
  displacements = &#x27;disp_x disp_y&#x27;
[]
</code></pre><a href="#c6b92928-8f13-443f-a072-f1b8c552a06e" class="modal-trigger">(../moose/modules/tensor_mechanics/test/tests/truss/truss_2d.i)</a><div class="modal moose-modal" id="c6b92928-8f13-443f-a072-f1b8c552a06e"><div class="modal-content"><h4>/home/gary/projects/moose/modules/tensor_mechanics/test/tests/truss/truss_2d.i</h4><pre class="moose-pre"><code class="language-text">#
# Truss in two dimensional space
#
# The truss is made of five equilateral triangles supported at each end.
# The truss starts at (0,0).  At (1,0), there is a point load of 25.
# The reactions are therefore
#  Ryleft  = 2/3 * 25 = 16.7
#  Ryright = 1/3 * 25 = 8.33
# The area of each member is 0.8.
# Statics gives the stress in each member.  For example, for element 6 (from
#   (0,0) to (1/2,sqrt(3)/2)), the force is
#   f = 2/3 * 25 * 2/sqrt(3) = 100/3/sqrt(3) (compressive)
#   and the stress is
#   s = -100/3/sqrt(3)/0.8 = -24.06
#

[Mesh]
  type = FileMesh
  file = truss_2d.e
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = FIRST
    family = LAGRANGE
  [../]
  [./disp_y]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxVariables]
  [./axial_stress]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e_over_l]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./area]
    order = CONSTANT
    family = MONOMIAL
#    initial_condition = 1.0
  [../]
  [./react_x]
    order = FIRST
    family = LAGRANGE
  [../]
  [./react_y]
    order = FIRST
    family = LAGRANGE
  [../]
  [./react_z]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Functions]
  [./x2]
    type = PiecewiseLinear
    x = &#x27;0  1 2 3&#x27;
    y = &#x27;0 .5 1 1&#x27;
  [../]
  [./y2]
    type = PiecewiseLinear
    x = &#x27;0 1  2 3&#x27;
    y = &#x27;0 0 .5 1&#x27;
  [../]
[]

[BCs]
  [./fixx1]
    type = DirichletBC
    variable = disp_x
    boundary = 1
    value = 0
  [../]
  [./fixy1]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0
  [../]

  [./fixy4]
    type = DirichletBC
    variable = disp_y
    boundary = 4
    value = 0
  [../]
[]

[DiracKernels]
  [./pull]
    type = ConstantPointSource
    value = -25
    point = &#x27;1 0 0&#x27;
    variable = disp_y
  [../]
[]

[AuxKernels]
  [./axial_stress]
    type = MaterialRealAux
    block = 1
    property = axial_stress
    variable = axial_stress
  [../]
  [./e_over_l]
    type = MaterialRealAux
    block = 1
    property = e_over_l
    variable = e_over_l
  [../]
  [./area]
    type = ConstantAux
    block = 1
    variable = area
    value = 0.8
    execute_on = &#x27;initial timestep_begin&#x27;
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient

  solve_type = PJFNK

  petsc_options_iname = &#x27;-pc_type -ksp_gmres_restart&#x27;
  petsc_options_value = &#x27;jacobi   101&#x27;

  nl_max_its = 15
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-10

  dt = 1
  num_steps = 1
  end_time = 1
[]

[Kernels]
  [./solid_x]
    type = StressDivergenceTensorsTruss
    block = 1
    displacements = &#x27;disp_x disp_y&#x27;
    component = 0
    variable = disp_x
    area = area
    save_in = react_x
  [../]
  [./solid_y]
    type = StressDivergenceTensorsTruss
    block = 1
    displacements = &#x27;disp_x disp_y&#x27;
    component = 1
    variable = disp_y
    area = area
    save_in = react_y
  [../]
[]

[Materials]
  [./linelast]
    type = LinearElasticTruss
    block = 1
    youngs_modulus = 1e6
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><p>Once enabled, the any object that should operate on the displaced configuration should set the &quot;use_displaced_mesh&quot; to true. For example, the following snippet enables the computation of a <a href="../Postprocessors/index.html">Postprocessor</a> with and without the displaced configuration.</p><pre class="moose-pre"><code class="language-text">[Postprocessors]
  [./without]
    type = ElementIntegralVariablePostprocessor
    variable = c
    execute_on = initial
  [../]
  [./with]
    type = ElementIntegralVariablePostprocessor
    variable = c
    use_displaced_mesh = true
    execute_on = initial
  [../]
[]
</code></pre><a href="#f4001abd-1ed6-4a91-a36c-d1baa1890fa2" class="modal-trigger">(../moose/test/tests/postprocessors/displaced_mesh/elemental.i)</a><div class="modal moose-modal" id="f4001abd-1ed6-4a91-a36c-d1baa1890fa2"><div class="modal-content"><h4>/home/gary/projects/moose/test/tests/postprocessors/displaced_mesh/elemental.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
  displacements = &#x27;ux uy&#x27;
[]

[AuxVariables]
  [./ux]
    [./InitialCondition]
      type = FunctionIC
      function = x
    [../]
  [../]
  [./uy]
    [./InitialCondition]
      type = FunctionIC
      function = y
    [../]
  [../]
  [./c]
    initial_condition = 1
  [../]
[]

[Variables]
  [./a]
  [../]
[]
[Kernels]
  [./a]
    type = Diffusion
    variable = a
  [../]
[]

[Postprocessors]
  [./without]
    type = ElementIntegralVariablePostprocessor
    variable = c
    execute_on = initial
  [../]
  [./with]
    type = ElementIntegralVariablePostprocessor
    variable = c
    use_displaced_mesh = true
    execute_on = initial
  [../]
[]

[Problem]
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 0
[]

[Outputs]
  [./out]
    type = Exodus
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></section><section class="scrollspy" id="b3b525b5-b83f-4967-ba73-3cc65d3dfa95" data-section-level="2" data-section-text="Mixed Dimension Meshes"><h2 id="mixed-dimension-meshes">Mixed Dimension Meshes</h2><p>MOOSE will function properly when running simulations on meshes containing mixed dimension elements (e.g. 1D and 2D, 1D and 3D, etc.). Residual calculation, material evaluation, etc should all work properly.</p><pre class="moose-pre"><code class="language-text">[Mesh]
  file = 1d_3d.e
  # 1d_3d.e contains HEX8 and BEAM2 elements - no additional input file
  # changes are necessary to handle mixed-dim meshes.
[]
</code></pre><a href="#30be257c-130c-4f89-901a-9a71247fa0c7" class="modal-trigger">(../moose/test/tests/mesh/mixed_dim/1d_3d.i)</a><div class="modal moose-modal" id="30be257c-130c-4f89-901a-9a71247fa0c7"><div class="modal-content"><h4>/home/gary/projects/moose/test/tests/mesh/mixed_dim/1d_3d.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  file = 1d_3d.e
  # 1d_3d.e contains HEX8 and BEAM2 elements - no additional input file
  # changes are necessary to handle mixed-dim meshes.
[]

[Variables]
  [./u]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]
  [./diff]
    type = Diffusion
    variable = u
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = 4
    value = 0
  [../]

  [./right]
    type = DirichletBC
    variable = u
    boundary = 2
    value = 1
  [../]

  [./bottom]
    type = DirichletBC
    variable = u
    boundary = 100
    value = 0
  [../]

  [./top]
    type = DirichletBC
    variable = u
    boundary = 101
    value = 1
  [../]
[]

[Executioner]
  type = Steady

  solve_type = &#x27;PJFNK&#x27;
[]

[Outputs]
  file_base = 1d_3d_out
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></section><section class="scrollspy" id="484b450f-1815-45f7-b345-2e585e27dddc" data-section-level="2" data-section-text="Unique IDs"><h2 id="unique-ids">Unique IDs</h2><p>There are two &quot;first-class&quot; id types for each mesh entity (elements or nodes): &quot;id and unique_id&quot;. Both the id and unique_id field are unique numbers for the current active set of mesh entities. Active entities are those that are currently representing the domain but doesn&#x27;t include &quot;coarse parents&quot; of some elements that may become active during a coarsening step. The difference however is that unique_ids are never reused, but ids <strong>might</strong> be. Generally the id is &quot;good-enough&quot; for almost all use, but if you need guarentees that an element id is never recycled (because it might be a key to an important map), you should use unique_id.</p></section><section class="scrollspy" id="98683426-6796-4b3b-aa8c-8ae738b7f548" data-section-level="2" data-section-text="Periodic Node Map"><h2 id="periodic-node-map">Periodic Node Map</h2><p>The MooseMesh object has a method for building a map (technically a multimap) of paired periodic nodes in the simulation. This map provides a quick lookup of all paired nodes on a periodic boundary. in the 2D and 3D cases each corner node will map to 2 or 3 other nodes (respectively).</p></section><section class="scrollspy" id="dd91bcf3-2ac0-4437-bf72-551ff03d1b8e" data-section-level="2" data-section-text="Extra integer IDs"><h2 id="extra-integer-ids">Extra integer IDs</h2><p>Extra integer IDs for all the elements of a mesh can be useful for handling complicated material assignment, performing specific calculations on groups of elements, etc. Often times, we do not want to use subdomain IDs for these tasks because otherwise too many subdomains could be needed, and in turn large penalty on run-time performance could be introduced.</p><p>MooseMesh<a href="../../source/mesh/MooseMesh.html">MooseMesh</a> has a parameter <code>extra_integers</code> to allow users to introduce more integer IDs for elements each identified with a name in the parameter. When this parameter is specified, extra integers will be made available for all elements through <code>Assembly</code> in MOOSE objects such as kernels, aux kernels, materials, initial conditions, element user objects, etc. To retrieve the integer on an element, one needs to simply call <code></code>` getElementID(integer_name_parameter, comp), <code></code>` within the initialization list of your constructor. <code>integer_name_parameter</code> is the name of the parameter in type of <code>std::vector&lt;ExtraElementIDName&gt;</code> of this object listing all integer names. <code>comp</code> is the index into the integer names if multiple are specified for <code>integer_name_parameter</code>. It is noticed that the returned value of this function call must be in type of <code>const dof_id_type &amp;</code>, which is used to refer the value set by MOOSE in <code>Assembly</code>. The returned reference should be held in a class member variable for later use. Based on this ID, one can proceed with any particular operations, for example, choosing a different set of data for evaluating material properties.</p><p>IDs can be assigned to the mesh elements with <code>MeshGenerators</code> in a similar way to assigning subdomain IDs. We note that the element IDs are part of the mesh and will be initialized properly for restart/recover. </p></section></section></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a href="#03a0669c-6aae-49d6-ba2b-4c1884bac6c7" class="tooltipped" data-position="left" data-tooltip="Overview">Overview</a></li><li><a href="#3dbf78a9-e99c-4f05-b21d-02ebd3230de3" class="tooltipped" data-position="left" data-tooltip="Example Syntax and Mesh Objects">Example Syntax and Mesh Objects</a></li><li><a href="#b57f5c4f-0c0f-4b0c-938c-3d2f1d9650ca" class="tooltipped" data-position="left" data-tooltip="Available Objects">Available Objects</a></li><li><a href="#0a2027bd-5304-4779-b3b8-073825df3c74" class="tooltipped" data-position="left" data-tooltip="Available Subsystems">Available Subsystems</a></li><li><a href="#6417115d-c1ea-4835-9be9-46f85d5f5361" class="tooltipped" data-position="left" data-tooltip="Available Actions">Available Actions</a></li><li><a href="#103885dd-5382-4ff6-b618-893c15b8f6f3" class="tooltipped" data-position="left" data-tooltip="MeshGenerator System">MeshGenerator System</a></li><li><a href="#a167a2b8-5ede-4185-b1da-6bceefcf25a7" class="tooltipped" data-position="left" data-tooltip="Outputting The Mesh">Outputting The Mesh</a></li><li><a href="#674dc5bc-fd8c-4b12-b247-b5a18255f572" class="tooltipped" data-position="left" data-tooltip="Named Entity Support">Named Entity Support</a></li><li><a href="#d3ee592f-8efd-431b-81c1-6e22670af491" class="tooltipped" data-position="left" data-tooltip="Replicated and Distributed Mesh">Replicated and Distributed Mesh</a></li><li><a href="#a15981ce-b34c-4447-96bb-d21d3266e4cd" class="tooltipped" data-position="left" data-tooltip="Mesh splitting">Mesh splitting</a></li><li><a href="#a28265b1-4f59-415b-9444-5d34645262db" class="tooltipped" data-position="left" data-tooltip="Displaced Mesh">Displaced Mesh</a></li><li><a href="#b3b525b5-b83f-4967-ba73-3cc65d3dfa95" class="tooltipped" data-position="left" data-tooltip="Mixed Dimension Meshes">Mixed Dimension Meshes</a></li><li><a href="#484b450f-1815-45f7-b345-2e585e27dddc" class="tooltipped" data-position="left" data-tooltip="Unique IDs">Unique IDs</a></li><li><a href="#98683426-6796-4b3b-aa8c-8ae738b7f548" class="tooltipped" data-position="left" data-tooltip="Periodic Node Map">Periodic Node Map</a></li><li><a href="#dd91bcf3-2ac0-4437-bf72-551ff03d1b8e" class="tooltipped" data-position="left" data-tooltip="Extra integer IDs">Extra integer IDs</a></li></ul></div></div></div></div></main></div></body><script type="text/javascript" src="../../contrib/jquery/jquery.min.js"></script><script type="text/javascript" src="../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../js/init.js"></script><script type="text/javascript" src="../../js/navigation.js"></script><script type="text/javascript" src="../../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../../js/search_index.js"></script>